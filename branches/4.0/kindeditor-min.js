(function(r,y){function v(a){return a&&Object.prototype.toString.call(a)==="[object Array]"}function w(a,b){for(var c=0,d=b.length;c<d;c++)if(a===b[c])return c;return-1}function m(a,b){if(v(a))for(var c=0,d=a.length;c<d;c++){if(b.call(a[c],c,a[c])===false)break}else for(c in a)if(a.hasOwnProperty(c))if(b.call(a[c],c,a[c])===false)break}function t(a){return a.replace(/^\s+|\s+$/g,"")}function O(a,b,c){c=c===y?",":c;return(c+b+c).indexOf(c+a+c)>=0}function F(a){return a&&/^\d+$/.test(a)?a+"px":a}function R(a){var b;
return a&&(b=/(\d+)/.exec(a))?parseInt(b[1],10):0}function W(a){function b(c){c=parseInt(c,10).toString(16).toUpperCase();return c.length>1?c:"0"+c}return a.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/ig,function(c,d,e,f){return"#"+b(d)+b(e)+b(f)})}function U(a,b){b=b===y?",":b;var c={},d=a.split(b),e;m(d,function(f,g){if(e=/^(\d+)\.\.(\d+)$/.exec(g))for(var i=parseInt(e[1],10);i<=parseInt(e[2],10);i++)c[i.toString()]=true;else c[g]=true});return c}function oa(a,b){return Array.prototype.slice.call(a,
b||0)}function Da(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent&&a.attachEvent("on"+b,c)}function pa(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,false);else a.detachEvent&&a.detachEvent("on"+b,c)}function ha(a,b){if(b){var c={},d=a.ownerDocument||a.document||a;m(ob,function(f,g){c[g]=b[g]});if(!c.target)c.target=c.srcElement||d;if(c.target.nodeType===3)c.target=c.target.parentNode;if(!c.relatedTarget&&c.fromElement)c.relatedTarget=c.fromElement===c.target?
c.toElement:c.fromElement;if(c.pageX==null&&c.clientX!=null){var e=d.documentElement;d=d.body;c.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0);c.pageY=c.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0)}if(!c.which&&(c.charCode||c.charCode===0?c.charCode:c.keyCode))c.which=c.charCode||c.keyCode;if(!c.metaKey&&c.ctrlKey)c.metaKey=c.ctrlKey;if(!c.which&&c.button!==y)c.which=c.button&1?1:c.button&2?3:c.button&4?2:0;switch(c.which){case 186:c.which=
59;break;case 187:case 107:case 43:c.which=61;break;case 189:case 45:c.which=109;break;case 42:c.which=106;break;case 47:c.which=111;break;case 78:c.which=110;break}if(c.which>=96&&c.which<=105)c.which-=48;c.preventDefault=function(){b.preventDefault&&b.preventDefault();b.returnValue=false};c.stopPropagation=function(){b.stopPropagation&&b.stopPropagation();b.cancelBubble=true};c.stop=function(){this.preventDefault();this.stopPropagation()};return c}}function ba(a){var b=w(a,ca);if(b<0){m(ca,function(c,
d){if(!d){b=c;ca[b]=a;return false}});if(b<0){b=ca.length;ca.push(a)}}b in D||(D[b]={});return b}function N(a,b,c){if(b.indexOf(",")>=0)m(b.split(","),function(){N(a,this,c)});else{var d=ba(a);if(d in D&&D[d][b]!==y&&D[d][b].length>0){m(D[d][b],function(e,f){f===y&&D[d][b].splice(e,1)});pa(a,b,D[d][b][0])}else D[d][b]=[];if(D[d][b].length===0)D[d][b][0]=function(e){m(D[d][b],function(f,g){f>0&&g&&g.call(a,ha(a,e))})};w(c,D[d][b])<0&&D[d][b].push(c);Da(a,b,D[d][b][0])}}function V(a,b,c){if(b&&b.indexOf(",")>=
0)m(b.split(","),function(){V(a,this,c)});else{var d=ba(a);if(b===y){if(d in D){m(D[d],function(i,j){j.length>0&&pa(a,i,j[0])});delete D[d];delete ca[d]}}else if(D[d][b]!==y&&D[d][b].length>0)if(c===y){pa(a,b,D[d][b][0]);delete D[d][b]}else{for(var e=1,f=D[d][b].length;e<f;e++)D[d][b][e]===c&&delete D[d][b][e];if(D[d][b].length==2&&D[d][b][1]===y){pa(a,b,D[d][b][0]);delete D[d][b]}var g=0;m(D[d],function(){g++});if(g<1){delete D[d];delete ca[d]}}}}function qa(a,b){if(b.indexOf(",")>=0)m(b.split(","),
function(){qa(a,this)});else{var c=ba(a);c in D&&D[c][b]!==y&&D[c][b].length>0&&D[c][b][0]()}}function ra(a){for(var b={},c=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,d;d=c.exec(a);){var e=t(d[1].toLowerCase());d=t(W(d[2]));b[e]=d}return b}function Y(a){for(var b={},c=/\s+(?:([\w-:]+)|(?:([\w-:]+)=([^\s"'<>]+))|(?:([\w-:]+)="([^"]*)")|(?:([\w-:]+)='([^']*)'))(?=(?:\s|\/|>)+)/g,d;d=c.exec(a);)b[d[1]||d[2]||d[4]||d[6]]=(d[2]?d[3]:d[4]?d[5]:d[7])||"";return b}function K(a){var b="";m(ra(a),function(c,d){b+=c+":"+
d+";"});return b}function T(a){a=(a+"").replace(/((?:[\r\n])*)<(\/)?([\w-:]+)(\s*(?:[\w-:]+)(?:=(?:"[^"]*"|'[^']*'|[^\s"'<>]*))?)*\s*(\/)?>((?:[\r\n])*)/g,function(b,c,d,e,f,g,i){b=c||"";d=d||"";e=e.toLowerCase();f=f||"";g=g?" "+g:"";i=i||"";if(g===""&&La[e])g=" /";if(i)i="";if(e!=="script"&&e!=="style")b="";if(f!==""){f=f.replace(/\s*([\w-:]+)=([^\s"'<>]+|"[^"]*"|'[^']*')/g,function(j,p,n){j=p.toLowerCase();n=n||"";if(n==="")n='""';else{if(j==="style"){n=n.substr(1,n.length-2);n=K(n);if(n==="")return"";
n='"'+n+'"'}/^['"]/.test(n)||(n='"'+n+'"')}return" "+j+"="+n+" "});f=t(f);if(f=f.replace(/\s+/g," "))f=" "+f;return b+"<"+d+e+f+g+">"+i}else return b+"<"+d+e+g+">"+i});return t(a)}function X(a,b){for(;b=b.parentNode;)if(b===a)return true;return false}function da(a,b){b=b.toLowerCase();var c=null;if(S&&sa<8){var d=a.ownerDocument.createElement("div");d.appendChild(a.cloneNode(false));d=Y(d.innerHTML.toLowerCase());if(b in d)c=d[b]}else c=a.getAttribute(b,2);if(b==="style"&&c!==null)c=K(c);return c}
function ea(a,b){function c(z){if(typeof z!="string")return z;return z.replace(/([^\w\-])/g,"\\$1")}function d(z,C){return z==="*"||z.toLowerCase()===c(C.toLowerCase())}function e(z,C,A){var u=[];(z=(A.ownerDocument||A).getElementById(z.replace(/\\/g,"")))&&d(C,z.nodeName)&&X(A,z)&&u.push(z);return u}function f(z,C,A){var u=A.ownerDocument||A,E=[],I,L,Q;if(A.getElementsByClassName){u=A.getElementsByClassName(z.replace(/\\/g,""));I=0;for(L=u.length;I<L;I++){Q=u[I];d(C,Q.nodeName)&&E.push(Q)}}else if(u.querySelectorAll){u=
u.querySelectorAll((A.nodeName!=="#document"?A.nodeName+" ":"")+C+"."+z);I=0;for(L=u.length;I<L;I++){Q=u[I];X(A,Q)&&E.push(Q)}}else{u=A.getElementsByTagName(C);I=0;for(L=u.length;I<L;I++){Q=u[I];if(Q.nodeType==1)(C=Q.className)&&(" "+C+" ").indexOf(" "+z+" ")>-1&&E.push(Q)}}return E}function g(z,C,A,u){var E=[];A=u.getElementsByTagName(A);for(var I=0,L=A.length;I<L;I++){u=A[I];if(u.nodeType==1)if(C===null)da(u,z)!==null&&E.push(u);else C===c(da(u,z))&&E.push(u)}return E}function i(z,C){var A=[],u,
E=(u=/^((?:\\.|[^.#\s\[<>])+)/.exec(z))?u[1]:"*";if(u=/#((?:[\w\-]|\\.)+)$/.exec(z))A=e(u[1],E,C);else if(u=/\.((?:[\w\-]|\\.)+)$/.exec(z))A=f(u[1],E,C);else if(u=/\[((?:[\w\-]|\\.)+)\]/.exec(z))A=g(u[1].toLowerCase(),null,E,C);else if(u=/\[((?:[\w\-]|\\.)+)\s*=\s*['"]?((?:\\.|[^'"]+)+)['"]?\]/.exec(z)){A=u[1].toLowerCase();u=u[2];if(A==="id")E=e(u,E,C);else{if(A==="class")E=f(u,E,C);else{if(A==="name"){A=[];u=(C.ownerDocument||C).getElementsByName(u.replace(/\\/g,""));for(var I,L=0,Q=u.length;L<
Q;L++){I=u[L];d(E,I.nodeName)&&X(C,I)&&I.getAttributeNode("name")&&A.push(I)}E=A}else E=g(A,u,E,C);E=E}E=E}A=E}else{E=C.getElementsByTagName(E);I=0;for(L=E.length;I<L;I++){u=E[I];u.nodeType==1&&A.push(u)}}return A}b=b||document;for(var j=[],p,n=/((?:\\.|[^\s>])+|[\s>])/g;p=n.exec(a);)p[1]!==" "&&j.push(p[1]);p=[];if(j.length==1)return i(j[0],b);n=false;var o,k,q,J,B,x,s,G,H,M;x=0;for(lenth=j.length;x<lenth;x++){o=j[x];if(o===">")n=true;else{if(x>0){k=[];s=0;for(H=p.length;s<H;s++){J=p[s];q=i(o,J);
G=0;for(M=q.length;G<M;G++){B=q[G];if(n)J===B.parentNode&&k.push(B);else k.push(B)}}p=k}else p=i(o,b);if(p.length===0)return[]}}return p}function P(a){return a.get?a.get():a}function Ca(a){var b=a.split("-");a="";m(b,function(c,d){a+=c>0?d.charAt(0).toUpperCase()+d.substr(1):d});return a}function ia(a,b,c){if(S&&sa<8&&b.toLowerCase()=="class")b="className";a.setAttribute(b,""+c)}function ja(a){if(!a)return document;return a.ownerDocument||a.document||a}function ya(a){if(!a)return r;a=ja(a);return a.parentWindow||
a.defaultView}function Ea(a){if(!a||!a.nodeName)return"";return a.nodeName.toLowerCase()}function pb(a,b){var c=ya(a),d=Ca(b),e="";if(c.getComputedStyle){c=c.getComputedStyle(a,null);e=c[d]||c.getPropertyValue(b)||a.style[d]}else if(a.currentStyle)e=a.currentStyle[d]||a.style[d];return e}function Z(a){a=a||document;return a.compatMode!="CSS1Compat"?a.body:a.documentElement}function qb(a){a=Z(a);return Math.max(a.scrollHeight,a.clientHeight)}function rb(a){a=Z(a);return Math.max(a.scrollWidth,a.clientWidth)}
function Fa(){var a,b;if(S||Ma){a=Z().scrollLeft;b=Z().scrollTop}else{a=r.scrollX;b=r.scrollY}return{x:a,y:b}}function $(a){var b=this;m(a,function(c){b[c]=this});b.length=a.length;b.doc=ja(b[0]);b.name=Ea(b[0]);b.type=b.length>0?b[0].nodeType:null;b.win=ya(b[0]);b._data={}}function Na(){this.collapsed=this.startContainer===this.endContainer&&this.startOffset===this.endOffset}function Ga(a,b){function c(B,x,s){var G=B.nodeValue.length,H;if(a){H=B.cloneNode(true).splitText(x);H.splitText(s-x)}if(b){var M=
B;if(x>0)M=B.splitText(x);s<G&&M.splitText(s-x);p.push(M)}return H}function d(B,x){var s;if(B.nodeType==3){s=c(B,g,j);a&&x.appendChild(s);return false}s=B.firstChild;for(var G,H=false,M=false,z=false,C=false;s;){G=new ka(e);G.selectNode(s);H||(H=G.compareBoundaryPoints(ta,n)>0);if(H&&!M)M=G.compareBoundaryPoints(za,n)>=0;if(M&&!z)z=G.compareBoundaryPoints(ua,n)>0;if(z&&!C)C=G.compareBoundaryPoints(va,n)>=0;if(C)return false;G=s.nextSibling;if(H)if(s.nodeType==1)if(M&&!z){a&&x.appendChild(s.cloneNode(true));
b&&p.push(s)}else{var A;if(a){A=s.cloneNode(false);x.appendChild(A)}if(d(s,A)===false)return false}else if(s.nodeType==3){s=s==f&&s==i?c(s,g,j):s==f?c(s,g,s.nodeValue.length):s==i?c(s,0,j):c(s,0,s.nodeValue.length);a&&x.appendChild(s)}s=G}}var e=this.doc,f=this.startContainer,g=this.startOffset,i=this.endContainer,j=this.endOffset,p=[],n=this;if(b){n=this.cloneRange();f.nodeType==3&&g===0&&this.setStart(f.parentNode,0);this.collapse(true)}var o=e.createDocumentFragment();d(n.commonAncestor(),o);for(var k=
0,q=p.length;k<q;k++){var J=p[k];J.parentNode&&J.parentNode.removeChild(J)}return a?o:this}function la(a,b){var c;a:{for(c=b;c;){if(h(c).name==="marquee"){c=true;break a}c=c.parentNode}c=false}c||a.moveToElementText(b)}function Oa(a,b){var c=a.parentElement().ownerDocument,d=a.duplicate();d.collapse(b);var e=d.parentElement(),f=e.childNodes;if(f.length===0)return{node:e.parentNode,offset:h(e).index()};c=c;var g=0,i=false,j=a.duplicate();la(j,e);for(var p=0,n=f.length;p<n;p++){var o=f[p],k=j.compareEndPoints("StartToStart",
d);if(k>0)i=true;if(k===0)return{node:o.parentNode,offset:p};if(o.nodeType==1){k=a.duplicate();la(k,o);j.setEndPoint("StartToEnd",k);if(i)g+=k.text.replace(/\r\n|\n|\r/g,"").length;else g=0}else if(o.nodeType==3){j.moveStart("character",o.nodeValue.length);g+=o.nodeValue.length}i||(c=o)}if(!i&&c.nodeType==1)return{node:e,offset:h(e.lastChild).index()+1};j=a.duplicate();la(j,e);j.setEndPoint("StartToEnd",d);g-=j.text.replace(/\r\n|\n|\r/g,"").length;return{node:c,offset:g}}function Pa(a){var b=a.ownerDocument,
c=0;for(a=a.previousSibling;a;){if(a.nodeType==1)if(h(a).isSingle())c+=1;else{var d=b.body.createTextRange();la(d,a);c+=d.text.length}else if(a.nodeType==3)c+=a.nodeValue.length;a=a.previousSibling}return c}function Qa(a,b){var c=a.ownerDocument||a,d=c.body.createTextRange();if(c==a){d.collapse(true);return d}if(a.nodeType==1){var e=a.childNodes,f,g=false,i;if(b===0){f=e[0];e=true}else{f=e[b-1];e=false}if(!f){i=c.createTextNode(" ");a.appendChild(i);f=i;g=true}if(f.nodeName.toLowerCase()==="head"){if(b===
1)e=true;if(b===2)e=false;d.collapse(e);return d}if(f.nodeType==1){la(d,f);d.collapse(e)}else{la(d,a);g&&a.removeChild(i);c=Pa(f);c=e?c:c+f.nodeValue.length;d.moveStart("character",c)}}else if(a.nodeType==3){la(d,a.parentNode);d.moveStart("character",b+Pa(a))}return d}function ka(a){this.startContainer=a;this.startOffset=0;this.endContainer=a;this.endOffset=0;this.collapsed=true;this.doc=a}function Aa(a){if(!a.nodeName){if(a.get)a=a;else a:{var b;if(S){if(a.item){b=ja(a.item(0));b=new ka(b);b.selectNode(a.item(0));
a=b;break a}b=a.parentElement().ownerDocument;var c=Oa(a,true);a=Oa(a,false);b=new ka(b);b.setStart(c.node,c.offset);b.setEnd(a.node,a.offset)}else{c=a.startContainer;b=c.ownerDocument||c;b=new ka(b);b.setStart(c,a.startOffset);b.setEnd(a.endContainer,a.endOffset)}a=b}return a}return new ka(a)}function wa(a,b,c){try{a.execCommand(b,false,c)}catch(d){}}function Ra(a,b){var c="";try{c=a.queryCommandValue(b)}catch(d){}if(typeof c!=="string")c="";return c}function Sa(a){var b=ya(a);return b.getSelection?
b.getSelection():a.selection}function Ta(a){var b=Sa(a),c;try{c=b.rangeCount>0?b.getRangeAt(0):b.createRange()}catch(d){}if(S&&(!c||!c.item&&c.parentElement().ownerDocument!==a))return null;return c}function Ua(a){var b={},c,d;m(a,function(e,f){c=e.split(",");for(var g=0,i=c.length;g<i;g++){d=c[g];b[d]=f}});return b}function xa(a,b,c){c=c||a.name;if(a.type!==1)return false;b=Ua(b);var d,e;if(b[c]){c=b[c].split(",");for(var f=0,g=c.length;f<g;f++){b=c[f];if(b==="*")return true;d=/^(\.?)([^=]+)(?:=([^=]+))?$/.exec(b);
e=d[1]?"css":"attr";b=d[2];d=d[3]||"";if(d===""&&a[e](b)!=="")return true;if(d!==""&&a[e](b)===d)return true}}return false}function Va(a){for(var b=a.first();b;){var c=b.next();a.before(b);b=c}a.remove()}function Wa(a,b,c){c=c||a.name;if(a.type===1){b=Ua(b);if(b[c]){c=b[c].split(",");allFlag=false;for(var d=0,e=c.length;d<e;d++){b=c[d];if(b==="*"){allFlag=true;break}var f=/^(\.?)([^=]+)(?:=([^=]+))?$/.exec(b);b=f[2];f[1]?a.css(b,""):a.removeAttr(b)}allFlag&&Va(a)}}}function ma(a){for(a=a;a.first();)a=
a.first();return a}function Xa(a,b){a=a.clone(true);for(var c=ma(a),d=a,e=false;b;){for(;d;){if(d.name===b.name){sb(d,b.attr(),b.css());e=true}d=d.first()}e||c.append(b.clone(false));e=false;b=b.first()}return a}function sb(a,b,c){m(b,function(d,e){d!=="style"&&a.attr(d,e)});m(c,function(d,e){a.css(d,e)})}function Ba(a){var b=a.doc;this.doc=b;this.win=ya(b);this.sel=Sa(b);this.range=a;this._preremove=this._preformat=null}function Ya(a){if(a.nodeName){var b=a.ownerDocument||a;a=Aa(b).selectNodeContents(b.body).collapse(false);
var c=new Ba(a);c.onchange(function(){var d=Ta(b);if(d)c.range=Aa(d)});c.oninput(function(){c._applyPreformat()});c.oncursormove(function(){c._preformat=null;c._preremove=null});Ha&&h(b).click(function(d){if(h(d.target).name==="img"){var e=Ta(b);if(e)c.range=Aa(e);c.range.selectNode(d.target);c.select()}});return c}return new Ba(a)}function Za(a){var b=a.moveEl,c=a.moveFn,d=a.clickEl||b,e=[document],f=[{x:0,y:0}],g=[];(a.iframeFix===y?true:a.iframeFix)&&h("iframe").each(function(){e.push(Ia(this));
f.push(h(this).pos())});d.mousedown(function(i){var j=d.get(),p=R(b.css("left")),n=R(b.css("top")),o=b.width(),k=b.height(),q=i.pageX,J=i.pageY,B=true;m(e,function(x,s){function G(z){if(B){var C=fa(f[x].x+z.pageX-q),A=fa(f[x].y+z.pageY-J);c.call(d,p,n,o,k,C,A)}z.stop()}function H(z){z.stop()}function M(z){B=false;j.releaseCapture&&j.releaseCapture();m(g,function(){h(this.doc).unbind("mousemove",this.move).unbind("mouseup",this.up).unbind("selectstart",this.select)});z.stop()}h(s).mousemove(G).mouseup(M).bind("selectstart",
H);g.push({doc:s,move:G,up:M,select:H})});j.setCapture&&j.setCapture();i.stop()})}function na(a){function b(J,B){if(f&&(a.x===y||a.y===y)){var x=R(J)||0,s=R(B)||0;if(a.alignEl){var G=a.alignEl,H=h(G).pos();x=fa(G.clientWidth/2-x/2);s=fa(G.clientHeight/2-s/2);d=x<0?H.x:H.x+x;e=s<0?H.y:H.y+s}else{H=Z(o);G=Fa();d=fa(G.x+(H.clientWidth-x)/2);e=fa(G.y+(H.clientHeight-s)/2)}d=d<0?0:F(d);e=e<0?0:F(e);q.css({left:d,top:e})}}var c=a.name||"",d=F(a.x),e=F(a.y),f=a.z,g=F(a.width),i=F(a.height),j=a.cls,p=a.css,
n=a.html,o=a.doc||document,k=a.parent||o.body,q=h('<div style="display:block;"></div>');g&&q.css("width",g);i&&q.css("height",i);f&&q.css({position:"absolute",left:d,top:e,"z-index":f});b(g,i);j&&q.addClass(j);p&&q.css(p);n&&q.html(n);h(k).append(q);return{name:c,doc:o,div:function(){return q},remove:function(){q.remove();return this},show:function(){q.show();return this},hide:function(){q.hide();return this},draggable:function(J){J=J||{};J.moveEl=q;J.moveFn=function(B,x,s,G,H,M){if((B+=H)<0)B=0;
if((x+=M)<0)x=0;q.css("left",F(B)).css("top",F(x))};Za(J);return this},resetPos:b}}function Ia(a){a=P(a);return a.contentDocument||a.contentWindow.document}function tb(a,b){var c=['<html><head><meta charset="utf-8" /><title>KindEditor</title>',"<style>","html {margin:0;padding:0;}","body {margin:0;padding:0;}",'body, td {font:12px/1.5 "sans serif",tahoma,verdana,helvetica;}',"p {margin:5px 0;}","table {border-collapse:collapse;}","table.ke-zeroborder td {border:1px dotted #AAAAAA;}","</style>"];if(b)v(b)?
m(b,function(d,e){e!==""&&c.push('<link href="'+e+'" rel="stylesheet" />')}):c.push("<style>"+b+"</style>");c.push("</head><body "+(a?'class="'+a+'"':"")+"></body></html>");return c.join("")}function $a(a){var b=na(a),c=b.remove,d=F(a.width),e=F(a.height),f=h(a.srcElement),g=a.designMode===y?true:a.designMode,i=a.bodyClass;a=a.cssData;var j=b.div().addClass("ke-edit"),p=h('<iframe class="ke-edit-iframe" frameborder="0"></iframe>'),n=h('<textarea class="ke-edit-textarea" kindeditor="true"></textarea>');
p.css("width","100%");n.css("width","100%");b.width=function(k){j.css("width",F(k));return b};b.height=function(k){k=F(k);j.css("height",k);p.css("height",k);if(S&&sa<8||document.compatMode!="CSS1Compat")k=F(R(k)-2);n.css("height",k);return b};d&&b.width(d);e&&b.height(e);g?n.hide():p.hide();j.append(p);j.append(n);f.hide();var o=Ia(p);if(!S)o.designMode="on";o.open();o.write(tb(i,a));o.close();if(S)o.body.contentEditable="true";b.iframe=p;b.textarea=n;b.doc=o;b.remove=function(){h(o).unbind();h(o.body).unbind();
h(document).unbind();var k=b.html();f.hasVal()?f.val(k):f.html(k);f.removeAttr("kindeditor");f.show();o.write("");o.clear();p.remove();n.remove();c.call(b);return b};b.html=function(k){if(g){var q=o.body;if(k===y)return h(q).html();h(q).html(k);return b}if(k===y)return n.val();n.val(k);return b};b.design=function(k){if(k===y?!g:k){if(!g){k=b.html();g=true;b.html(k);n.hide();p.show()}}else if(g){k=b.html();g=false;b.html(k);p.hide();n.show()}b.focus();return b};b.focus=function(){g?p.get().contentWindow.focus():
n.get().focus();return b};b.html(f.hasVal()?f.val(void 0):f.html(void 0));b.cmd=Ya(o);return b}function ab(a,b){a.mouseover(function(){h(this).addClass("ke-toolbar-icon-outline-on")}).mouseout(function(){h(this).removeClass("ke-toolbar-icon-outline-on")}).click(function(c){b.click.call(this,c);c.stop()})}function bb(a){var b=na(a),c=b.remove,d=a.disableMode===y?false:a.disableMode,e=a.noDisableItems===y?[]:a.noDisableItems,f=b.div(),g={};f.addClass("ke-toolbar").bind("contextmenu,mousedown,mousemove",
function(i){i.preventDefault()});b.get=function(i){return g[i]};b.addItem=function(i){var j;if(i.name=="|")j=h('<span class="ke-inline-block ke-toolbar-separator"></span>');else if(i.name=="/")j=h("<br />");else{j=h('<a class="ke-inline-block ke-toolbar-icon-outline" href="#" title="'+(i.title||"")+'"><span class="ke-inline-block ke-toolbar-icon ke-toolbar-icon-url ke-icon-'+i.name+'"></span></a>');ab(j,i)}j.data("item",i);g[i.name]=j;f.append(j)};b.remove=function(){m(g,function(i,j){j.remove()});
c.call(b)};b.disable=function(i){var j;if(i===y?!d:i){m(g,function(p,n){j=n.data("item");if(j.name!=="/"&&w(j.name,e)<0){n.addClass("ke-toolbar-icon-outline-disabled");n.opacity(0.5);j.name!=="|"&&n.unbind()}});d=true}else{m(g,function(p,n){j=n.data("item");if(j.name!=="/"&&w(j.name,e)<0){n.removeClass("ke-toolbar-icon-outline-disabled");n.opacity(1);j.name!=="|"&&ab(n,j)}});d=false}};return b}function cb(a){a.z=a.z||811213;var b=na(a),c=b.div(),d=b.remove,e=a.centerLineMode===y?true:a.centerLineMode;
c.addClass("ke-menu");b.addItem=function(f){if(f.title==="-")c.append(h('<div class="ke-menu-separator"></div>'));else{var g=h('<div class="ke-menu-item"></div>'),i=h('<div class="ke-inline-block ke-menu-item-left"></div>'),j=h('<div class="ke-inline-block ke-menu-item-right"></div>'),p=F(f.height),n=f.iconClass;c.append(g);if(p){g.css("height",p);j.css("line-height",p)}var o;if(e){o=h('<div class="ke-inline-block ke-menu-item-center"></div>');p&&o.css("height",p)}g.mouseover(function(){h(this).addClass("ke-menu-item-on");
o&&o.addClass("ke-menu-item-center-on")});g.mouseout(function(){h(this).removeClass("ke-menu-item-on");o&&o.removeClass("ke-menu-item-center-on")});g.click(function(k){f.click.call(h(this));k.stop()});g.append(i);o&&g.append(o);g.append(j);if(f.checked)n="ke-icon-checked";i.html('<span class="ke-inline-block ke-toolbar-icon ke-toolbar-icon-url '+n+'"></span>');j.html(f.title)}};b.remove=function(){h(".ke-menu-item",c.get()).remove();d.call(b)};return b}function db(a){function b(k,q,J){k=h(k).addClass(J);
e===q.toLowerCase()&&k.addClass("ke-colorpicker-cell-selected");k.attr("title",q||a.noColor);k.mouseover(function(){h(this).addClass("ke-colorpicker-cell-on")});k.mouseout(function(){h(this).removeClass("ke-colorpicker-cell-on")});k.click(function(B){a.click.call(h(this),q);B.stop()});q?k.append(h('<div class="ke-colorpicker-cell-color"></div>').css("background-color",q)):k.html(a.noColor);g.push(k)}a.z=a.z||811213;var c=na(a),d=a.colors||[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],
["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]],e=(a.selectedColor||"").toLowerCase(),f=c.remove,g=[];c.div().addClass("ke-colorpicker");var i=c.doc.createElement("table");c.div().append(i);i.className="ke-colorpicker-table";i.cellPadding=0;i.cellSpacing=0;i.border=0;var j=i.insertRow(0),p=j.insertCell(0);p.colSpan=d[0].length;b(p,"","ke-colorpicker-cell-top");
for(var n=0;n<d.length;n++){j=i.insertRow(n+1);for(var o=0;o<d[n].length;o++){p=j.insertCell(o);b(p,d[n][o],"ke-colorpicker-cell")}}c.remove=function(){m(g,function(){this.unbind()});f.call(c)};return c}function eb(a){a.z=a.z||811213;var b=na(a),c=b.remove,d=F(a.width),e=F(a.height),f=b.doc,g=b.div(),i=a.title,j=h(a.body,f),p=a.previewBtn,n=a.yesBtn,o=a.noBtn,k=a.closeBtn;a=a.shadowMode===y?true:a.shadowMode;var q=f.documentElement,J=Math.max(q.scrollWidth,q.clientWidth);q=Math.max(q.scrollHeight,
q.clientHeight);g.addClass("ke-dialog").bind("click,mousedown",function(L){L.stopPropagation()});var B;if(a){f=f.createElement("table");f.className="ke-dialog-table";f.cellPadding=0;f.cellSpacing=0;f.border=0;g.append(f);var x=["t","m","b"],s=["l","c","r"],G,H,M,z;G=0;for(len=3;G<len;G++){M=f.insertRow(G);H=0;for(l=3;H<l;H++){z=M.insertCell(H);z.className="ke-"+x[G]+s[H];if(G==1&&H==1)B=h(z);else z.innerHTML='<span class="ke-dialog-empty"></span>'}}B.css({width:d,height:e,"vertical-align":"top"})}else{g.addClass("ke-dialog-no-shadow");
B=g}var C=h('<div class="ke-dialog-header"></div>');B.append(C);C.html(i);var A=h('<span class="ke-dialog-icon-close ke-dialog-icon-close-'+(a?"":"no-")+'shadow" title="'+k.name+'"></span>').click(k.click);C.append(A);b.draggable({clickEl:C});var u=h('<div class="ke-dialog-body"></div>');B.append(u);u.append(j);var E=h('<div class="ke-dialog-footer"></div>');if(p||n||o)B.append(E);m([{btn:p,name:"preview"},{btn:n,name:"yes"},{btn:o,name:"no"}],function(){var L=this.btn;if(L){var Q=h('<input type="button" class="ke-dialog-'+
this.name+'" value="'+L.name+'" />');E.append(Q);Q.click(L.click)}});b.height&&u.height(R(b.height)-C.height()-E.height());var I=na({x:0,y:0,z:811212,cls:"ke-dialog-mask",width:J,height:q});b.resetPos(g.width(),g.height());b.remove=function(){I.remove();A.remove();h("input",g.get()).remove();E.remove();u.remove();C.remove();c.call(b)};b.show=function(){I.show();g.show()};b.hide=function(){I.hide();g.hide()};return b}function fb(a){var b,c="core";if(b=/^(\w+)\.(\w+)$/.exec(a)){c=b[1];a=b[2]}return{ns:c,
key:a}}function gb(a,b){b=b===y?hb.langType:b;if(typeof a==="string"){if(!ga[b])return"no language";var c=a.length-1;if(a.substr(c)===".")return ga[b][a.substr(0,c)];c=fb(a);return ga[b][c.ns][c.key]}m(a,function(d,e){var f=fb(d);ga[b]||(ga[b]={});ga[b][f.ns]||(ga[b][f.ns]={});ga[b][f.ns][f.key]=e})}function ib(a){var b=this;m(a,function(d){b[d]=a[d]});m(hb,function(d,e){if(b[d]===y)b[d]=e});var c=h(b.srcElement);if(!b.width)b.width=c.width()||b.minWidth;if(!b.height)b.height=c.height()||b.minHeight;
b.width=F(b.width);b.height=F(b.height);b.srcElement=c;b._handlers={};m(jb,function(){this.call(b)})}var aa=navigator.userAgent.toLowerCase(),S=aa.indexOf("msie")>-1&&aa.indexOf("opera")==-1,Ja=aa.indexOf("gecko")>-1&&aa.indexOf("khtml")==-1,Ha=aa.indexOf("applewebkit")>-1,Ma=aa.indexOf("opera")>-1,sa=(aa=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(aa))?aa[1]:"0",fa=Math.round,h={kindeditor:"4.0 (2010-07-27)",IE:S,GECKO:Ja,WEBKIT:Ha,OPERA:Ma,VERSION:sa,each:m,isArray:v,isFunction:function(a){return a&&
Object.prototype.toString.call(a)==="[object Function]"},inArray:w,inString:O,trim:t,addUnit:F,removeUnit:R,escape:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},unescape:function(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},toHex:W,toMap:U,toArray:oa},hb={designMode:true,fullscreenMode:false,filterMode:false,shadowMode:true,scriptPath:function(){for(var a=document.getElementsByTagName("script"),
b,c=0,d=a.length;c<d;c++){b=a[c].src||"";if(/kindeditor[\w\-\.]*\.js/.test(b))return b.substring(0,b.lastIndexOf("/")+1)}return""}(),langType:"zh_CN",urlType:"",newlineType:"p",resizeType:2,dialogAlignType:"page",bodyClass:"ke-content",cssData:"",minWidth:550,minHeight:100,minChangeSize:5,shortcutKeys:{undo:"Z",redo:"Y",bold:"B",italic:"I",underline:"U",selectall:"A",print:"P"},items:["source","|","fullscreen","undo","redo","print","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter",
"justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","|","selectall","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","removeformat","|","image","flash","media","table","hr","emoticons","link","unlink","|","about"],colors:[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5",
"#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]],htmlTags:{font:["color","size","face",".background-color"],span:[".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align"],div:["align",".border",".margin",".padding",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".background",".font-style",".text-decoration",".vertical-align",".margin-left"],
table:["border","cellspacing","cellpadding","width","height","align","bordercolor",".padding",".margin",".border","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".background",".width",".height"],"td,th":["align","valign","width","height","colspan","rowspan","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".vertical-align",".background"],
a:["href","target","name"],embed:["src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess","/"],img:["src","width","height","border","alt","title",".width",".height","/"],hr:["/"],br:["/"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["align",".text-align",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],"tbody,tr,strong,b,sub,sup,em,i,u,strike":[]}},
kb=U("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),ub=U("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),La=U("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed");U("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");
U("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected");var lb=U("input,button,textarea,select"),ob="altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,layerX,layerY,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which".split(","),
ca=[],D={};S&&r.attachEvent("onunload",function(){m(ca,function(a,b){b&&V(b)})});h.ctrl=function(a,b,c){b=/^\d{2,}$/.test(b)?b:b.toUpperCase().charCodeAt(0);N(a,"keydown",function(d){if(d.ctrlKey&&d.which==b&&!d.shiftKey&&!d.altKey){c.call(a);d.stop()}})};h.ready=function(a,b){function c(){if(!f){f=true;a(KindEditor)}V(b,"DOMContentLoaded");V(b,"readystatechange");V(e,"load")}function d(){if(!f){try{b.documentElement.doScroll("left")}catch(g){e.setTimeout(d,0);return}c()}}b=b||document;var e=b.parentWindow||
b.defaultView,f=false;if(b.addEventListener)N(b,"DOMContentLoaded",c);else if(b.attachEvent){N(b,"readystatechange",function(){b.readyState==="complete"&&c()});b.documentElement.doScroll&&e.frameElement===y&&d()}N(e,"load",c)};h.formatHtml=T;h.query=function(a,b){var c=ea(a,b);return c.length>0?c[0]:null};h.queryAll=ea;$.prototype={each:function(a){for(var b=0;b<this.length;b++)if(a.call(this[b],b,this[b])===false)return this;return this},bind:function(a,b){this.each(function(){N(this,a,b)});return this},
unbind:function(a,b){this.each(function(){V(this,a,b)});return this},fire:function(a){if(this.length<1)return this;qa(this[0],a);return this},hasAttr:function(a){if(this.length<1)return null;return da(this[0],a)},attr:function(a,b){var c=this;if(a===y)return Y(c.outer());if(typeof a==="object"){m(a,function(d,e){c.attr(d,e)});return c}if(b===y){b=c.length<1?null:da(c[0],a);return b===null?"":b}c.each(function(){ia(this,a,b)});return c},removeAttr:function(a){this.each(function(){var b=a;if(S&&sa<
8&&b.toLowerCase()=="class")b="className";ia(this,b,"");this.removeAttribute(b)});return this},get:function(a){if(this.length<1)return null;return this[a||0]},hasClass:function(a){if(this.length<1)return false;return O(a,this[0].className," ")},addClass:function(a){this.each(function(){if(!O(a,this.className," "))this.className=t(this.className+" "+a)});return this},removeClass:function(a){this.each(function(){if(O(a,this.className," "))this.className=t(this.className.replace(new RegExp("\\s*"+a+
"\\s*"),""))});return this},html:function(a){if(a===y){if(this.length<1)return"";return T(this[0].innerHTML)}this.each(function(){var b=T(a);if(this.nodeType==1)this.innerHTML=""+b});return this},hasVal:function(){if(this.length<1)return false;return!!lb[Ea(this[0])]},val:function(a){if(a===y){if(this.length<1)return"";return this.hasVal()?this[0].value:this.attr("value")}else{this.each(function(){if(lb[Ea(this)])this.value=a;else ia(this,"value",a)});return this}},css:function(a,b){var c=this;if(a===
y)return ra(c.attr("style"));if(typeof a==="object"){m(a,function(d,e){c.css(d,e)});return c}if(b===y){if(c.length<1)return"";return c[0].style[a]||pb(c[0],a)||""}c.each(function(){this.style[Ca(a)]=b});return c},width:function(a){if(a===y){if(this.length<1)return 0;return this[0].offsetWidth}return this.css("width",F(a))},height:function(a){if(a===y){if(this.length<1)return 0;return this[0].offsetHeight}return this.css("height",F(a))},opacity:function(a){this.each(function(){if(this.style.opacity===
y)this.style.filter=a==1?"":"alpha(opacity="+a*100+")";else this.style.opacity=a==1?"":a});return this},data:function(a,b){if(b===y)return this._data[a];this._data[a]=b;return this},pos:function(){var a=this[0],b=0,c=0;if(a)if(a.getBoundingClientRect){a=a.getBoundingClientRect();c=Fa();b=a.left+c.x;c=a.top+c.y}else for(;a;){b+=a.offsetLeft;c+=a.offsetTop;a=a.offsetParent}return{x:fa(b),y:fa(c)}},clone:function(a){if(this.length<1)return new $([]);return new $([this[0].cloneNode(a)])},append:function(a){if(this.length<
1)return this;this[0].appendChild(P(a));return this},before:function(a){if(this.length<1)return this;this[0].parentNode.insertBefore(P(a),this[0]);return this},after:function(a){if(this.length<1)return this;this[0].nextSibling?this[0].parentNode.insertBefore(P(a),this[0].nextSibling):this[0].appendChild(P(a));return this},replaceWith:function(a){a=P(a);if(this.length<1)return this;V(this[0]);this[0].parentNode.replaceChild(a,this[0]);this[0]=a;return this},remove:function(){var a=this;a.each(function(b,
c){V(c);if(c.hasChildNodes())c.innerHTML="";c.parentNode&&c.parentNode.removeChild(c);delete a[b]});a.length=0;return a},show:function(a){return this.css("display",a===y?"block":a)},hide:function(){return this.css("display","none")},outer:function(){if(this.length<1)return"";var a=this.doc.createElement("div");a.appendChild(this[0].cloneNode(true));return T(a.innerHTML)},isSingle:function(){return!!La[this.name]},isInline:function(){return!!kb[this.name]},isBlock:function(){return!!ub[this.name]},
contains:function(a){if(this.length<1)return false;return X(this[0],P(a))},parent:function(){if(this.length<1)return null;var a=this[0].parentNode;return a?new $([a]):null},children:function(){if(this.length<1)return[];for(var a=[],b=this[0].firstChild;b;){if(b.nodeType!=3||t(b.nodeValue)!=="")a.push(new $([b]));b=b.nextSibling}return a},first:function(){var a=this.children();return a.length>0?a[0]:null},last:function(){var a=this.children();return a.length>0?a[a.length-1]:null},index:function(){if(this.length<
1)return-1;for(var a=-1,b=this[0];b;){a++;b=b.previousSibling}return a},prev:function(){if(this.length<1)return null;var a=this[0].previousSibling;return a?new $([a]):null},next:function(){if(this.length<1)return null;var a=this[0].nextSibling;return a?new $([a]):null},scan:function(a,b){function c(d){for(d=b?d.firstChild:d.lastChild;d;){var e=b?d.nextSibling:d.previousSibling;if(a(d)===false)return false;if(c(d)===false)return false;d=e}}if(!(this.length<1)){b=b===y?true:b;c(this[0]);return this}}};
m("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error".split(","),function(a,b){$.prototype[b]=function(c){return c?this.bind(b,c):this.fire(b)}});Ja=h;h=function(a,b){function c(i){i[0]||(i=[]);return new $(i)}if(typeof a==="string"){if(b)b=P(b);var d=a.length;if(a.charAt(0)==="@")a=a.substr(1);if(a.length!==d||/<.+>/.test(a)){d=(b?b.ownerDocument||b:document).createElement("div");
var e=[];if(d.nodeType==1)d.innerHTML=""+a;for(var f=0,g=d.childNodes.length;f<g;f++)e.push(d.childNodes[f]);return c(e)}return c(ea(a,b))}if(a&&a.get)return a;if(v(a))return c(a);return c(oa(arguments))};m(Ja,function(a,b){h[a]=b});var za=0,ta=1,ua=2,va=3;ka.prototype={commonAncestor:function(){function a(j){for(var p=[];j;){p.push(j);j=j.parentNode}return p}for(var b=a(this.startContainer),c=a(this.endContainer),d=0,e=b.length,f=c.length,g,i;++d;){g=b[e-d];i=c[f-d];if(!g||!i||g!==i)break}return b[e-
d+1]},setStart:function(a,b){var c=this.doc;this.startContainer=a;this.startOffset=b;if(this.endContainer===c){this.endContainer=a;this.endOffset=b}Na.call(this);return this},setEnd:function(a,b){var c=this.doc;this.endContainer=a;this.endOffset=b;if(this.startContainer===c){this.startContainer=a;this.startOffset=b}Na.call(this);return this},setStartBefore:function(a){return this.setStart(a.parentNode||this.doc,h(a).index())},setStartAfter:function(a){return this.setStart(a.parentNode||this.doc,h(a).index()+
1)},setEndBefore:function(a){return this.setEnd(a.parentNode||this.doc,h(a).index())},setEndAfter:function(a){return this.setEnd(a.parentNode||this.doc,h(a).index()+1)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){var b=h(a);if(b.type==3||b.isSingle())return this.selectNode(a);b=b.children();if(b.length>0)return this.setStartBefore(b[0].get()).setEndAfter(b[b.length-1].get());return this.setStart(a,0).setEnd(a,0)},collapse:function(a){if(a)return this.setEnd(this.startContainer,
this.startOffset);return this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(a,b){var c=this.get(),d=b.get();if(this.doc.createRange)return c.compareBoundaryPoints(a,d);else{var e={};e[za]="StartToStart";e[ta]="EndToStart";e[ua]="EndToEnd";e[va]="StartToEnd";c=c.compareEndPoints(e[a],d);if(c!==0)return c;var f,g,i,j;if(a===za||a===va){f=this.startContainer;i=this.startOffset}if(a===ta||a===ua){f=this.endContainer;i=this.endOffset}if(a===za||a===ta){g=b.startContainer;j=
b.startOffset}if(a===ua||a===va){g=b.endContainer;j=b.endOffset}if(f===g){f=i-j;return f>0?1:f<0?-1:0}for(c=g;c&&c.parentNode!==f;)c=c.parentNode;if(c)return h(c).index()>=i?-1:1;for(c=f;c&&c.parentNode!==g;)c=c.parentNode;if(c)return h(c).index()>=j?1:-1}},cloneRange:function(){return(new ka(this.doc)).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},toString:function(){var a=this.get();return(this.doc.createRange?a.toString():a.text).replace(/\r\n|\n|\r/g,
"")},cloneContents:function(){return Ga.call(this,true,false)},deleteContents:function(){return Ga.call(this,false,true)},extractContents:function(){return Ga.call(this,true,true)},insertNode:function(a){var b=this.startContainer,c=this.startOffset,d=this.endContainer,e=this.endOffset,f,g,i,j=1;if(a.nodeName.toLowerCase()==="#document-fragment"){f=a.firstChild;g=a.lastChild;j=a.childNodes.length}if(b.nodeType==1)if(i=b.childNodes[c]){b.insertBefore(a,i);if(b===d)e+=j}else b.appendChild(a);else if(b.nodeType==
3)if(c===0){b.parentNode.insertBefore(a,b);if(b.parentNode===d)e+=j}else if(c>=b.nodeValue.length)b.nextSibling?b.parentNode.insertBefore(a,b.nextSibling):b.parentNode.appendChild(a);else{i=b.splitText(c);b.parentNode.insertBefore(a,i);if(b===d){d=i;e-=c}}f?this.setStartBefore(f).setEndAfter(g):this.selectNode(a);if(this.compareBoundaryPoints(ua,this.cloneRange().setEnd(d,e))>=1)return this;return this.setEnd(d,e)},surroundContents:function(a){a.appendChild(this.extractContents());return this.insertNode(a).selectNode(a)},
isControl:function(){var a=this.startContainer,b=this.startOffset,c=this.endOffset;return a===this.endContainer&&b+1===c&&h(a.childNodes[b]).name==="img"},get:function(a){var b=this.doc,c=this.startContainer,d=this.startOffset,e=this.endContainer,f=this.endOffset;if(b.createRange){a=b.createRange();try{a.setStart(c,d);a.setEnd(e,f)}catch(g){}return a}if(a&&this.isControl()){a=b.body.createControlRange();a.addElement(c.childNodes[d]);return a}a=b.body.createTextRange();a.setEndPoint("StartToStart",
Qa(c,d));a.setEndPoint("EndToStart",Qa(e,f));return a},html:function(){return h(this.cloneContents()).outer()}};h.range=Aa;h.START_TO_START=za;h.START_TO_END=ta;h.END_TO_END=ua;h.END_TO_START=va;var mb=U("9,32,48..57,59,61,65..90,106,109..111,188,190..192,219..222"),nb=U("8,13,33..40,46"),Ka={};m(mb,function(a,b){Ka[a]=b});m(nb,function(a,b){Ka[a]=b});Ba.prototype={select:function(){var a=this.sel,b=this.range.cloneRange(),c=b.startContainer,d=c.ownerDocument||c,e=ya(d);if(S&&c.nodeType==1&&b.collapsed){a=
h("<span>&nbsp;</span>",d);b.insertNode(a.get());b=d.body.createTextRange();b.moveToElementText(a.get());b.collapse(false);b.select();a.remove();e.focus();return this}b=b.get(true);if(S)b.select();else{a.removeAllRanges();a.addRange(b)}e.focus();return this},wrap:function(a){function b(o,k,q){var J=o.nodeValue.length,B=o;if(!(q<=k)){if(k>0)B=o.splitText(k);q<J&&B.splitText(q-k);var x;q=h(B);k=g==o;for(o=j==o;(x=q.parent())&&x.isInline()&&x.children().length==1;){k||(k=g==x.get());o||(o=j==x.get());
q=x}x=q;q=f;q=q.clone(true);if(x.type==3){ma(q).append(x.clone(false));x.before(q);x.remove()}else{J=x;for(var s;(s=x.first())&&s.children().length==1;)x=s;for(B=x.doc.createDocumentFragment();s=x.first();){s.next();B.appendChild(s.get())}q=Xa(J,q);B.firstChild&&ma(q).append(B);J.before(q);J.remove()}s=q.get();k&&e.setStartBefore(s);o&&e.setEndAfter(s)}}function c(o){var k=o.firstChild;if(o.nodeType==3){b(o,i,p);return false}for(var q;k;){o=Aa(d);o.selectNode(k);if(o.compareBoundaryPoints(va,e)>=
0)return false;q=k.nextSibling;if(o.compareBoundaryPoints(ta,e)>0)if(k.nodeType==1){if(c(k)===false)return false}else if(k.nodeType==3)if(k==g&&k==j)b(k,i,p);else if(k==g)b(k,i,k.nodeValue.length);else k==j?b(k,0,p):b(k,0,k.nodeValue.length);k=q}}var d=this.doc,e=this.range,f,g=e.startContainer,i=e.startOffset,j=e.endContainer,p=e.endOffset;f=typeof a=="string"?h(a,d):a;if(e.collapsed){if(this._preformat)f=Xa(this._preformat.wrapper,f);a=0;if(g.nodeType==3)a=g.nodeValue.length;else if(i>0)a=g.childNodes[i-
1].nodeValue.length;this._preformat={wrapper:f,textLength:a,range:e.cloneRange()};return this}if(!f.isInline()){for(var n=a=f.clone(true);n.first();)n=n.first();n.append(e.extractContents());e.insertNode(a.get()).selectNode(a.get());return this}c(e.commonAncestor());return this},split:function(a,b){for(var c=this.range,d=c.doc,e=c.cloneRange().collapse(a),f=e.startContainer,g=e.startOffset,i=f.nodeType==3?f.parentNode:f,j=false,p;i&&i.parentNode;){p=h(i);if(!p.isInline())break;if(!(xa(p,b,"*")||xa(p,
b)))break;j=true;i=i.parentNode}if(j){d=d.createElement("span");c.cloneRange().collapse(!a).insertNode(d);a?e.setStartBefore(i.firstChild).setEnd(f,g):e.setStart(f,g).setEndAfter(i.lastChild);f=e.extractContents();g=f.firstChild;j=f.lastChild;if(a){e.insertNode(f);c.setStartAfter(j).setEndBefore(d)}else{i.appendChild(f);c.setStartBefore(d).setEndBefore(g)}e=d.parentNode;e.removeChild(d);!a&&e===c.endContainer&&c.setEnd(c.endContainer,c.endOffset-1)}return this},remove:function(a){var b=this.range;
if(b.collapsed){this._preremove={map:a,range:b.cloneRange()};return this}this.split(true,a);this.split(false,a);var c=[];h(b.commonAncestor()).scan(function(j){c.push(h(j))});var d=b.startContainer,e=b.startOffset,f=b.endContainer,g=b.endOffset;if(e>0){var i=h(d.childNodes[e-1]);if(i&&ma(i).isInline()){i.remove();b.setStart(d,e-1);d==f&&b.setEnd(f,g-1)}if((i=h(d.childNodes[e]))&&ma(i).isInline()){i.remove();d==f&&b.setEnd(f,g-1)}}(b=h(f.childNodes[b.endOffset]))&&ma(b).isInline()&&b.remove();m(c,
function(){Wa(this,a,"*");Wa(this,a)});return this},_applyPreformat:function(){var a=this.range,b=a.startContainer,c=a.startOffset,d=this._preformat,e=this._preremove;if(d||e){d?a.setStart(d.range.startContainer,d.range.startOffset):a.setStart(e.range.startContainer,e.range.startOffset);if(d){a.collapsed&&c>0&&a.setStart(b.childNodes[c-1],d.textLength);this.wrap(d.wrapper)}if(e){if(a.collapsed){this._preremove=this._preformat=null;return}this.remove(e.map)}b=a.startContainer;c=a.startOffset;b=ma(h(b.nodeType==
3?b:b.childNodes[c])).get();a.setEnd(b,b.nodeValue.length);a.collapse(false);this.select();this._preremove=this._preformat=null}},commonNode:function(a){var b=this.range,c=b.endContainer;b=b.endOffset;c=h(c.nodeType==3||b===0?c:c.childNodes[b-1]);for(b=c.get();b&&(b=b.firstChild)&&b.childNodes.length==1;)if(xa(b,a,"*")||xa(b,a))return h(b);for(;c;){if(xa(c,a,"*")||xa(c,a))return c;c=c.parent()}return null},state:function(a){var b=this.doc,c=false;try{c=b.queryCommandState(a)}catch(d){}return c},val:function(a){var b=
this.doc;a=a.toLowerCase();var c="";if(a==="fontfamily"||a==="fontname"){c=Ra(b,"fontname");c=c.replace(/['"]/g,"");return c.toLowerCase()}if(a==="formatblock"){c=Ra(b,a);if(c==="")if(a=this.commonNode({"h1,h2,h3,h4,h5,h6,p,div,pre,address":"*"}))c=a.name;if(c==="Normal")c="p";return c.toLowerCase()}if(a==="fontsize"){if(a=this.commonNode({"*":".font-size"}))c=a.css("font-size");return c.toLowerCase()}if(a==="forecolor"){if(a=this.commonNode({"*":".color"}))c=a.css("color");c=W(c);if(c==="")c="default";
return c.toLowerCase()}if(a==="hilitecolor"){if(a=this.commonNode({"*":".background-color"}))c=a.css("background-color");c=W(c);if(c==="")c="default";return c.toLowerCase()}if(a==="createlink"){if(a=this.commonNode({a:"*"}))c=a.attr("href");return c}return c},toggle:function(a,b){this.commonNode(b)?this.remove(b):this.wrap(a);return this.select()},bold:function(){return this.toggle("<strong></strong>",{span:".font-weight=bold",strong:"*",b:"*"})},italic:function(){return this.toggle("<em></em>",{span:".font-style=italic",
em:"*",i:"*"})},underline:function(){return this.toggle("<u></u>",{span:".text-decoration=underline",u:"*"})},strikethrough:function(){return this.toggle("<s></s>",{span:".text-decoration=line-through",s:"*"})},forecolor:function(a){return this.toggle('<span style="color:'+a+';"></span>',{span:".color="+a,font:"color"})},hilitecolor:function(a){return this.toggle('<span style="background-color:'+a+';"></span>',{span:".background-color="+a})},fontsize:function(a){return this.toggle('<span style="font-size:'+
a+';"></span>',{span:".font-size="+a,font:"size"})},fontname:function(a){return this.fontfamily(a)},fontfamily:function(a){return this.toggle('<span style="font-family:'+a+';"></span>',{span:".font-family="+a,font:"face"})},removeformat:function(){var a={"*":"class,style"};m(kb,function(b){a[b]="*"});this.remove(a);return this.select()},inserthtml:function(a){var b=this.doc,c=this.range,d=b.createDocumentFragment();h("@"+a,b).each(function(){d.appendChild(this)});c.deleteContents();c.insertNode(d);
c.collapse(false);return this.select()},hr:function(){return this.inserthtml("<hr />")},print:function(){this.win.print();return this},createlink:function(a,b){var c=this.doc,d=this.range;this.select();var e=this.commonNode({a:"*"});if(e&&!d.isControl()){d.selectNode(e.get());this.select()}if(d.collapsed){c='<a href="'+a+'"';if(b)c+=' target="'+b+'"';c+=">"+a+"</a>";this.inserthtml(c);return this}wa(c,"createlink","__ke_temp_url__");e=this.commonNode({a:"*"});h('a[href="__ke_temp_url__"]',e?e.parent():
c).each(function(){h(this).attr("href",a);b?h(this).attr("target",b):h(this).removeAttr("target")});return this},unlink:function(){var a=this.doc,b=this.range;this.select();if(b.collapsed){var c=this.commonNode({a:"*"});if(c){b.selectNode(c.get());this.select()}wa(a,"unlink",null);if(Ha&&h(b.startContainer).name==="img"){a=h(b.startContainer).parent();a.name==="a"&&Va(a)}return this}wa(a,"unlink",null);return this},oninput:function(a){h(this.doc).keyup(function(b){if(!b.ctrlKey&&!b.altKey&&mb[b.which]){a(b);
b.stop()}});return this},oncursormove:function(a){var b=this.doc;h(b).keyup(function(c){if(!c.ctrlKey&&!c.altKey&&nb[c.which]){a(c);c.stop()}});h(b).mouseup(a);return this},onchange:function(a){function b(e){setTimeout(function(){a(e)},1)}var c=this.doc,d=c.body;h(c).keyup(function(e){if(!e.ctrlKey&&!e.altKey&&Ka[e.which]){a(e);e.stop()}});h(c).mouseup(a);c!==document&&h(document).mousedown(a);h(d).bind("paste",b);h(d).bind("cut",b);return this}};m("formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript".split(","),
function(a,b){Ba.prototype[b]=function(c){wa(this.doc,b,c);return this}});m("cut,copy,paste".split(","),function(a,b){Ba.prototype[b]=function(){if(!this.doc.queryCommandSupported(b))throw"not supported";wa(this.doc,b,null);return this}});h.cmd=Ya;h.widget=na;h.edit=$a;h.iframeDoc=Ia;h.toolbar=bb;h.menu=cb;h.colorpicker=db;h.dialog=eb;var jb=[],ga={};ib.prototype={lang:function(a){return gb(a,this.langType)},handler:function(a,b){var c=this;c._handlers[a]||(c._handlers[a]=[]);if(b===y){m(c._handlers[a],
function(){this.call(c)});return c}c._handlers[a].push(b);return c},clickToolbar:function(a,b){return this.handler("clickToolbar"+a,b)},afterCreate:function(a){return this.handler("afterCreate",a)},beforeHideMenu:function(a){return this.handler("beforeHideMenu",a)},create:function(){function a(){b.container&&b.resize(Z().clientWidth,Z().clientHeight)}var b=this,c=b.fullscreenMode;if(c)Z().style.overflow="hidden";else Z().style.overflow="auto";var d=c?rb()+"px":b.width,e=c?qb()+"px":b.height,f=h('<div class="ke-container"></div>').css("width",
d);if(c){var g=Fa();f.css({position:"absolute",left:F(g.x),top:F(g.y),"z-index":19811211});h(document.body).append(f)}else b.srcElement.before(f);var i=bb({parent:f,noDisableItems:"source,fullscreen".split(",")});m(b.items,function(n,o){i.addItem({name:o,title:b.lang(o),click:function(){if(b.menu){var k=b.menu.name;b.hideMenu();if(k===o)return}b.clickToolbar(o)}})});b.designMode||i.disable(true);g=$a({parent:f,srcElement:b.srcElement,designMode:b.designMode,bodyClass:b.bodyClass,cssData:b.cssData});
h(g.doc,document).click(function(){b.menu&&b.hideMenu()});var j=h('<div class="ke-statusbar"></div>'),p;f.append(j);if(!c){p=h('<span class="ke-inline-block ke-statusbar-right-icon"></span>');j.append(p);Za({moveEl:f,clickEl:p,moveFn:function(n,o,k,q,J,B){k+=J;q+=B;k>=b.minWidth&&b.resize(k,null);q>=b.minHeight&&b.resize(null,q)}})}if(b._resizeListener){h(r).unbind("resize",b._resizeListener);b._resizeListener=null}if(b.fullscreenMode){h(r).bind("resize",a);b._resizeListener=a}b.container=f;b.toolbar=
i;b.edit=g;b.statusbar=j;b.menu=b.dialog=null;b._rightIcon=p;b.resize(d,e);b.afterCreate();return b},remove:function(){this.menu&&this.hideMenu();this.dialog&&this.hideDialog();this.toolbar.remove();this.edit.remove();this._rightIcon.remove();this.statusbar.remove();this.container.remove();this.container=this.toolbar=this.edit=this.menu=this.dialog=null;return this},resize:function(a,b){a!==null&&this.container.css("width",F(a));if(b!==null){b=R(b)-this.toolbar.div().height()-this.statusbar.height()-
11;b>0&&this.edit.height(b)}return this},select:function(){this.edit.cmd.select();return this},html:function(a){if(a===y)return this.edit.html();this.edit.html(a);return this},insertHtml:function(a){this.edit.cmd.inserthtml(a);return this},val:function(a){return this.edit.cmd.val(a)},state:function(a){return this.edit.cmd.state(a)},exec:function(a){var b=this.edit.cmd;b[a].apply(b,oa(arguments,1));return this},focus:function(){this.edit.focus();return this},fullscreen:function(a){this.fullscreenMode=
a===y?!this.fullscreenMode:a;this.remove();return this.create()},createMenu:function(a){var b=this.toolbar.get(a.name),c=b.pos();a.x=c.x;a.y=c.y+b.height();if(a.selectedColor!==y){a.noColor=this.lang("noColor");this.menu=db(a)}else{a.centerLineMode=false;this.menu=cb(a)}return this.menu},hideMenu:function(){this.beforeHideMenu();this.menu.remove();this.menu=null;return this},createDialog:function(a){var b=this;a.shadowMode=b.shadowMode;a.closeBtn={name:b.lang("close"),click:function(){b.hideDialog();
b.focus()}};a.noBtn={name:b.lang("no"),click:function(){b.hideDialog();b.focus()}};return b.dialog=eb(a)},hideDialog:function(){this.dialog.remove();this.dialog=null;return this}};S&&sa<7&&wa(document,"BackgroundImageCache",true);h.create=function(a,b){b||(b={});var c=h(a);if(c){b.srcElement=c[0];if(!b.width)b.width=c.width();if(!b.height)b.height=c.height();return(new ib(b)).create()}};h.plugin=function(a){jb.push(a)};h.lang=gb;if(r.K===y)r.K=h;r.KindEditor=h})(window);
(function(r,y){r.plugin(function(){this.clickToolbar("source",function(){this.toolbar.disable();this.edit.design()})});r.plugin(function(){this.clickToolbar("fullscreen",function(){this.fullscreen()})});r.plugin(function(){this.clickToolbar("formatblock",function(){var v=this,w=v.lang("formatblock.formatBlock"),m={h1:28,h2:24,h3:18,H4:14,p:12},t=v.val("formatblock"),O=v.createMenu({name:"formatblock",width:v.langType=="en"?200:150});r.each(w,function(F,R){var W="font-size:"+m[F]+"px;";if(F.charAt(0)===
"h")W+="font-weight:bold;";O.addItem({title:'<span style="'+W+'">'+R+"</span>",height:m[F]+12,checked:t===F||t===R,click:function(){v.select().exec("formatblock","<"+F.toUpperCase()+">").hideMenu()}})})})});r.plugin(function(){this.clickToolbar("fontname",function(){var v=this,w=v.val("fontname"),m=v.createMenu({name:"fontname",width:150});r.each(v.lang("fontname.fontName"),function(t,O){m.addItem({title:'<span style="font-family: '+t+';">'+O+"</span>",checked:w===t.toLowerCase()||w===O.toLowerCase(),
click:function(){v.exec("fontname",t).hideMenu()}})})})});r.plugin(function(){this.clickToolbar("fontsize",function(){var v=this,w=v.val("fontsize");menu=v.createMenu({name:"fontsize",width:150});r.each(["9px","10px","12px","14px","16px","18px","24px","32px"],function(m,t){menu.addItem({title:'<span style="font-size:'+t+';">'+t+"</span>",height:r.removeUnit(t)+12,checked:w===t,click:function(){v.exec("fontsize",t).hideMenu()}})})})});r.each("forecolor,hilitecolor".split(","),function(v,w){r.plugin(function(){this.clickToolbar(w,
function(){var m=this;m.createMenu({name:w,selectedColor:m.val(w)||"default",click:function(t){m.exec(w,t).hideMenu()}})})})});r.each("selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript,hr,print,bold,italic,underline,strikethrough,removeformat,unlink".split(","),function(v,w){r.plugin(function(){var m=this;m.shortcutKeys[w]&&m.afterCreate(function(){r.ctrl(this.edit.doc,m.shortcutKeys[w],function(){m.clickToolbar(w)})});
m.clickToolbar(w,function(){m.focus().exec(w,null)})})});r.each("cut,copy,paste".split(","),function(v,w){r.plugin(function(){this.clickToolbar(w,function(){this.focus();try{this.exec(w,null)}catch(m){alert(this.lang(w+"Error"))}})})});r.plugin(function(){this.clickToolbar("about",function(){var v='<div style="margin:20px;"><div>KindEditor '+r.kindeditor+'</div><div>Copyright &copy; <a href="http://www.kindsoft.net/" target="_blank">kindsoft.net</a> All rights reserved.</div></div>';this.createDialog({name:"about",
width:300,title:this.lang("about"),body:v})})});r.plugin(function(){this.clickToolbar("plainpaste",function(){var v=this,w='<div style="margin:10px;"><div style="margin-bottom:10px;">'+v.lang("plainpaste.").comment+'</div><textarea style="width:415px;height:260px;border:1px solid #A0A0A0;"></textarea></div>';w=v.createDialog({name:"plainpaste",width:450,title:v.lang("plainpaste"),body:w,yesBtn:{name:v.lang("yes"),click:function(){var t=m.val();t=r.escape(t);t=t.replace(/ /g,"&nbsp;");t=t.replace(/\r\n|\n|\r/g,
"<br />$&");v.insertHtml(t).hideDialog().focus()}}});var m=r("textarea",w.div());m.get().focus()})});r.plugin(function(){this.clickToolbar("wordpaste",function(){var v=this,w='<div style="margin:10px;"><div style="margin-bottom:10px;">'+v.lang("wordpaste.").comment+'</div><iframe style="width:415px;height:260px;border:1px solid #A0A0A0;" frameborder="0"></iframe></div>';w=v.createDialog({name:"wordpaste",width:450,title:v.lang("wordpaste"),body:w,yesBtn:{name:v.lang("yes"),click:function(){var t=
m.body.innerHTML;t=t.replace(/<meta(\n|.)*?>/ig,"");t=t.replace(/<!(\n|.)*?>/ig,"");t=t.replace(/<style[^>]*>(\n|.)*?<\/style>/ig,"");t=t.replace(/<script[^>]*>(\n|.)*?<\/script>/ig,"");t=t.replace(/<w:[^>]+>(\n|.)*?<\/w:[^>]+>/ig,"");t=t.replace(/<xml>(\n|.)*?<\/xml>/ig,"");t=t.replace(/\r\n|\n|\r/ig,"");v.insertHtml(t).hideDialog().focus()}}}).div();w=r("iframe",w.get());var m=r.iframeDoc(w);if(!r.IE)m.designMode="on";m.open();m.write("<html><head><title>WordPaste</title></head>");m.write('<body style="background-color:#FFFFFF;font-size:12px;margin:2px;" />');
r.IE||m.write("<br />");m.write("</body></html>");m.close();if(r.IE)m.body.contentEditable="true";w.get().contentWindow.focus()})});r.plugin(function(){this.clickToolbar("link",function(){var v=this,w=v.lang("link."),m='<div style="margin:10px;"><div style="margin-bottom:10px;"><label>'+w.url+'</label><input type="text" name="url" value="" style="width:90%;" /></div><div style="margin-bottom:10px;"><label>'+w.linkType+'</label><select name="type"></select></div>';m=v.createDialog({name:"link",width:400,
title:v.lang("link"),body:m,yesBtn:{name:v.lang("yes"),click:function(){v.exec("createlink",t.val(),O.val()).hideDialog().focus()}}}).div();var t=r('input[name="url"]',m),O=r('select[name="type"]',m);O.get().options[0]=new Option(w.newWindow,"_blank");O.get().options[1]=new Option(w.selfWindow,"");t.val(v.val("createlink"));t.get().focus()})});r.plugin(function(){var v=this,w=this.emoticonsPath||this.scriptPath+"emoticons/",m=this.allowPreviewEmoticons===y?true:this.allowPreviewEmoticons;v.clickToolbar("emoticons",
function(){function t(ra,Y){var K=document.createElement("table");Y.append(K);if(N){r(K).mouseover(function(){N.show()});r(K).mouseout(function(){N.hide()});ba.push(r(K))}K.className="ke-plugin-emoticons-table";K.cellPadding=0;K.cellSpacing=0;K.border=0;for(var T=(ra-1)*oa+U,X=0;X<R;X++)for(var da=K.insertRow(X),ea=0;ea<W;ea++){var P=r(da.insertCell(ea));P.addClass("ke-plugin-emoticons-cell");N?function(ia,ja){P.mouseover(function(){if(ia>pa){N.css("left",0);N.css("right","")}else{N.css("left","");
N.css("right",0)}V.attr("src",w+ja+".gif");r(this).addClass("ke-plugin-emoticons-cell-on")})}(ea,T):P.mouseover(function(){r(this).addClass("ke-plugin-emoticons-cell-on")});P.mouseout(function(){r(this).removeClass("ke-plugin-emoticons-cell-on")});(function(ia){P.click(function(ja){v.insertHtml('<img src="'+w+ia+'.gif" border="0" alt="" />').hideMenu().focus();ja.stop()})})(T);var Ca=r('<span class="ke-plugin-emoticons-img"></span>').css("background-position","-"+24*T+"px 0px").css("background-image",
"url("+w+"static.gif)");P.append(Ca);ba.push(P);T++}return K}function O(){r.each(ba,function(){this.unbind()})}function F(ra){var Y=r('<div class="ke-plugin-emoticons-page"></div>');ha.append(Y);for(var K=1;K<=Da;K++){if(ra!==K){var T=r('<a href="javascript:;">['+K+"]</a>");(function(X){T.click(function(da){O();qa.parentNode.removeChild(qa);Y.remove();qa=t(X,ha);F(X);da.stop()})})(K);Y.append(T);ba.push(T)}else Y.append(r("@["+K+"]"));Y.append(r("@&nbsp;"))}}var R=5,W=9,U=0,oa=R*W,Da=Math.ceil(135/
oa),pa=Math.floor(W/2),ha=r('<div class="ke-plugin-emoticons-wrapper"></div>'),ba=[];v.createMenu({name:"emoticons"}).div().append(ha);var N,V;if(m){N=r('<div class="ke-plugin-emoticons-preview"></div>').css("right",0);V=r('<img class="ke-plugin-emoticons-preview-img" src="'+w+U+'.gif" />');ha.append(N);N.append(V)}var qa=t(1,ha);F(1);v.beforeHideMenu(function(){O()})})})})(KindEditor);
