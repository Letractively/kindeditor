(function(J,p){function K(a){if(!a)return false;return Object.prototype.toString.call(a)==="[object Array]"}function F(a,b){for(var c=0,d=b.length;c<d;c++)if(a===b[c])return c;return-1}function t(a,b){if(K(a))for(var c=0,d=a.length;c<d;c++){if(b.call(a[c],c,a[c])===false)break}else for(c in a)if(a.hasOwnProperty(c))if(b.call(a[c],c,a[c])===false)break}function L(a){return a.replace(/^\s+|\s+$/g,"")}function P(a,b,c){c=c===p?",":c;return(c+b+c).indexOf(c+a+c)>=0}function G(a){return a&&/^\d+$/.test(a)?
a+"px":a}function O(a){var b;return a&&(b=/(\d+)/.exec(a))?parseInt(b[1],10):0}function ja(a){function b(c){c=parseInt(c,10).toString(16).toUpperCase();return c.length>1?c:"0"+c}return a.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/ig,function(c,d,e,f){return"#"+b(d)+b(e)+b(f)})}function Q(a,b){b=b===p?",":b;var c={},d=K(a)?a:a.split(b),e;t(d,function(f,g){if(e=/^(\d+)\.\.(\d+)$/.exec(g))for(var i=parseInt(e[1],10);i<=parseInt(e[2],10);i++)c[i.toString()]=true;else c[g]=true});return c}
function ta(a,b){return Array.prototype.slice.call(a,b||0)}function ka(a,b){return a===p?b:a}function sb(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent&&a.attachEvent("on"+b,c)}function pa(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,false);else a.detachEvent&&a.detachEvent("on"+b,c)}function tb(a,b){if(b){var c={},d=a.ownerDocument||a.document||a;t(ub,function(f,g){c[g]=b[g]});if(!c.target)c.target=c.srcElement||d;if(c.target.nodeType===3)c.target=c.target.parentNode;
if(!c.relatedTarget&&c.fromElement)c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement;if(c.pageX==null&&c.clientX!=null){var e=d.documentElement;d=d.body;c.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0);c.pageY=c.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0)}if(!c.which&&(c.charCode||c.charCode===0?c.charCode:c.keyCode))c.which=c.charCode||c.keyCode;if(!c.metaKey&&c.ctrlKey)c.metaKey=c.ctrlKey;if(!c.which&&
c.button!==p)c.which=c.button&1?1:c.button&2?3:c.button&4?2:0;switch(c.which){case 186:c.which=59;break;case 187:case 107:case 43:c.which=61;break;case 189:case 45:c.which=109;break;case 42:c.which=106;break;case 47:c.which=111;break;case 78:c.which=110;break}if(c.which>=96&&c.which<=105)c.which-=48;c.preventDefault=function(){b.preventDefault&&b.preventDefault();b.returnValue=false};c.stopPropagation=function(){b.stopPropagation&&b.stopPropagation();b.cancelBubble=true};c.stop=function(){this.preventDefault();
this.stopPropagation()};return c}}function ua(a){var b=F(a,U);if(b<0){t(U,function(c,d){if(!d){b=c;U[b]=a;return false}});if(b<0){b=U.length;U.push(a)}}b in B||(B[b]={});return b}function ca(a,b,c){if(b.indexOf(",")>=0)t(b.split(","),function(){ca(a,this,c)});else{var d=ua(a);if(d in B&&B[d][b]!==p&&B[d][b].length>0){t(B[d][b],function(e,f){f===p&&B[d][b].splice(e,1)});pa(a,b,B[d][b][0])}else B[d][b]=[];if(B[d][b].length===0)B[d][b][0]=function(e){t(B[d][b],function(f,g){f>0&&g&&g.call(a,tb(a,e))})};
F(c,B[d][b])<0&&B[d][b].push(c);sb(a,b,B[d][b][0])}}function V(a,b,c){if(b&&b.indexOf(",")>=0)t(b.split(","),function(){V(a,this,c)});else{var d=ua(a);if(b===p){if(d in B){t(B[d],function(i,j){j.length>0&&pa(a,i,j[0])});delete B[d];delete U[d]}}else if(B[d][b]!==p&&B[d][b].length>0)if(c===p){pa(a,b,B[d][b][0]);delete B[d][b]}else{for(var e=1,f=B[d][b].length;e<f;e++)B[d][b][e]===c&&delete B[d][b][e];if(B[d][b].length==2&&B[d][b][1]===p){pa(a,b,B[d][b][0]);delete B[d][b]}var g=0;t(B[d],function(){g++});
if(g<1){delete B[d];delete U[d]}}}}function Ia(a,b){if(b.indexOf(",")>=0)t(b.split(","),function(){Ia(a,this)});else{var c=ua(a);c in B&&B[c][b]!==p&&B[c][b].length>0&&B[c][b][0]()}}function Ja(a){for(var b={},c=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,d;d=c.exec(a);){var e=L(d[1].toLowerCase());d=L(ja(d[2]));b[e]=d}return b}function va(a){for(var b={},c=/\s+(?:([\w-:]+)|(?:([\w-:]+)=([^\s"'<>]+))|(?:([\w-:]+)="([^"]*)")|(?:([\w-:]+)='([^']*)'))(?=(?:\s|\/|>)+)/g,d;d=c.exec(a);)b[d[1]||d[2]||d[4]||d[6]]=(d[2]?
d[3]:d[4]?d[5]:d[7])||"";return b}function vb(a){var b="";t(Ja(a),function(c,d){b+=c+":"+d+";"});return b}function Ka(a,b,c,d){function e(j){j=j.split("/");for(var m=[],s=0,n=j.length;s<n;s++){var k=j[s];if(k=="..")m.length>0&&m.pop();else k!==""&&k!="."&&m.push(k)}return"/"+m.join("/")}function f(j,m){if(a.substr(0,j.length)===j){for(var s=[],n=0;n<m;n++)s.push("..");n=".";if(s.length>0)n+="/"+s.join("/");if(d=="/")n+="/";return n+a.substr(j.length)}else if(i=/^(.*)\//.exec(j))return f(i[1],++m)}
if(!b)return a;b=b.toLowerCase();if(F(b,["absolute","relative","domain"])<0)return a;c=c||location.protocol+"//"+location.host;if(d===p){var g=location.pathname.match(/^(\/.*)\//);d=g?g[1]:""}var i;if(i=/^(\w+:\/\/[^\/]*)/.exec(a)){if(i[1]!==c)return a}else if(/^\w+:/.test(a))return a;if(/^\//.test(a))a=c+e(a.substr(1));else/^\w+:\/\//.test(a)||(a=c+e(d+"/"+a));if(b==="relative")a=f(c+d,0).substr(2);else if(b==="absolute")if(a.substr(0,c.length)===c)a=a.substr(c.length);return a}function qa(a,b,c){c=
c||"";var d=b?true:false;a=a.replace(/(<pre[^>]*>)([\s\S]*?)(<\/pre>)/ig,function(g,i,j,m){return i+j.replace(/<br[^>]*>/ig,"\n")+m});var e={},f=["xx-small","x-small","small","medium","large","x-large","xx-large"];d&&t(b,function(g,i){for(var j=g.split(","),m=0,s=j.length;m<s;m++)e[j[m]]=Q(i)});a=a.replace(/((?:\r\n|\n|\r)*)<(\/)?([\w-:]+)((?:\s+|(?:\s+[\w-:]+)|(?:\s+[\w-:]+=[^\s"'<>]+)|(?:\s+[\w-:]+="[^"]*")|(?:\s+[\w-:]+='[^']*'))*)(\/)?>((?:\r\n|\n|\r)*)/g,function(g,i,j,m,s,n,k){g=i||"";j=j||
"";var o=m.toLowerCase();m=s||"";n=n?" "+n:"";k=k||"";if(d&&!e[o])return"";if(n===""&&La[o])n=" /";if(Ma[o]){if(j||n)k="\n"}else if(k)k=" ";if(o!=="script"&&o!=="style")g="";if(o==="font"){var v={},w="";m=m.replace(/\s*([\w-:]+)=([^\s"'<>]+|"[^"]*"|'[^']*')/g,function(u,q,r){q=q.toLowerCase();r=r||"";r=r.replace(/^["']|["']$/g,"");if(q==="color"){v.color=r;return" "}if(q==="size"){v["font-size"]=f[parseInt(r,10)-1]||"";return" "}if(q==="face"){v["font-family"]=r;return" "}if(q==="style"){w=r;return" "}return u});
if(w&&!/;$/.test(w))w+=";";t(v,function(u,q){if(q!==""){if(/\s/.test(q))q="'"+q+"'";w+=u+":"+q+";"}});if(w)m+=' style="'+w+'"';o="span"}if(m!==""){m=m.replace(/\s*([\w-:]+)=([^\s"'<>]+|"[^"]*"|'[^']*')/g,function(u,q,r){u=q.toLowerCase();r=r||"";if(d)if(u.charAt(0)==="."||u!=="style"&&!e[o][u])return" ";if(r==="")r='""';else{if(u==="style"){r=r.substr(1,r.length-2);r=r.replace(/\s*([^\s]+?)\s*:(.*?)(;|$)/g,function(C,H,y){C=H.toLowerCase();if(d)if(!e[o].style&&!e[o]["."+C])return"";y=L(y);y=ja(y);
return C+":"+y+";"});r=L(r);if(r==="")return"";r='"'+r+'"'}if(F(u,["src","href"])>=0){if(r.charAt(0)==='"')r=r.substr(1,r.length-2);r=Ka(r,c)}if(r.charAt(0)!=='"')r='"'+r+'"'}return" "+u+"="+r+" "});m=m.replace(/\s+(checked|selected|disabled|readonly)(\s+|$)/ig,function(u,q){var r=q.toLowerCase();if(d)if(r.charAt(0)==="."||!e[o][r])return" ";return" "+r+'="'+r+'" '});m=L(m);if(m=m.replace(/\s+/g," "))m=" "+m;return g+"<"+j+o+m+n+">"+k}else return g+"<"+j+o+n+">"+k});if(!M){a=a.replace(/<p><br\s+\/>\n<\/p>/ig,
"<p>&nbsp;</p>");a=a.replace(/<br\s+\/>\n<\/p>/ig,"</p>")}return L(a)}function Na(a){if(/\.(rm|rmvb)(\?|$)/i.test(a))return"audio/x-pn-realaudio-plugin";if(/\.(swf|flv)(\?|$)/i.test(a))return"application/x-shockwave-flash";return"video/x-ms-asf-plugin"}function Oa(a){var b="<embed ";t(a,function(c,d){b+=c+'="'+d+'" '});b+="/>";return b}function ra(a,b){for(;b=b.parentNode;)if(b===a)return true;return false}function sa(a,b){b=b.toLowerCase();var c=null;if(M&&da<8){var d=a.ownerDocument.createElement("div");
d.appendChild(a.cloneNode(false));d=va(d.innerHTML.toLowerCase());if(b in d)c=d[b]}else c=a.getAttribute(b,2);if(b==="style"&&c!==null)c=vb(c);return c}function wa(a,b){function c(y){if(typeof y!="string")return y;return y.replace(/([^\w\-])/g,"\\$1")}function d(y,A){return y==="*"||y.toLowerCase()===c(A.toLowerCase())}function e(y,A,z){var x=[];(y=(z.ownerDocument||z).getElementById(y.replace(/\\/g,"")))&&d(A,y.nodeName)&&ra(z,y)&&x.push(y);return x}function f(y,A,z){var x=z.ownerDocument||z,D=[],
E,I,N;if(z.getElementsByClassName){x=z.getElementsByClassName(y.replace(/\\/g,""));E=0;for(I=x.length;E<I;E++){N=x[E];d(A,N.nodeName)&&D.push(N)}}else if(x.querySelectorAll){x=x.querySelectorAll((z.nodeName!=="#document"?z.nodeName+" ":"")+A+"."+y);E=0;for(I=x.length;E<I;E++){N=x[E];ra(z,N)&&D.push(N)}}else{x=z.getElementsByTagName(A);E=0;for(I=x.length;E<I;E++){N=x[E];if(N.nodeType==1)(A=N.className)&&(" "+A+" ").indexOf(" "+y+" ")>-1&&D.push(N)}}return D}function g(y,A,z,x){var D=[];z=x.getElementsByTagName(z);
for(var E=0,I=z.length;E<I;E++){x=z[E];if(x.nodeType==1)if(A===null)sa(x,y)!==null&&D.push(x);else A===c(sa(x,y))&&D.push(x)}return D}function i(y,A){var z=[],x,D=(x=/^((?:\\.|[^.#\s\[<>])+)/.exec(y))?x[1]:"*";if(x=/#((?:[\w\-]|\\.)+)$/.exec(y))z=e(x[1],D,A);else if(x=/\.((?:[\w\-]|\\.)+)$/.exec(y))z=f(x[1],D,A);else if(x=/\[((?:[\w\-]|\\.)+)\]/.exec(y))z=g(x[1].toLowerCase(),null,D,A);else if(x=/\[((?:[\w\-]|\\.)+)\s*=\s*['"]?((?:\\.|[^'"]+)+)['"]?\]/.exec(y)){z=x[1].toLowerCase();x=x[2];if(z===
"id")D=e(x,D,A);else{if(z==="class")D=f(x,D,A);else{if(z==="name"){z=[];x=(A.ownerDocument||A).getElementsByName(x.replace(/\\/g,""));for(var E,I=0,N=x.length;I<N;I++){E=x[I];d(D,E.nodeName)&&ra(A,E)&&E.getAttributeNode("name")&&z.push(E)}D=z}else D=g(z,x,D,A);D=D}D=D}z=D}else{D=A.getElementsByTagName(D);E=0;for(I=D.length;E<I;E++){x=D[E];x.nodeType==1&&z.push(x)}}return z}b=b||document;for(var j=[],m,s=/((?:\\.|[^\s>])+|[\s>])/g;m=s.exec(a);)m[1]!==" "&&j.push(m[1]);m=[];if(j.length==1)return i(j[0],
b);s=false;var n,k,o,v,w,u,q,r,C,H;u=0;for(lenth=j.length;u<lenth;u++){n=j[u];if(n===">")s=true;else{if(u>0){k=[];q=0;for(C=m.length;q<C;q++){v=m[q];o=i(n,v);r=0;for(H=o.length;r<H;r++){w=o[r];if(s)v===w.parentNode&&k.push(w);else k.push(w)}}m=k}else m=i(n,b);if(m.length===0)return[]}}return m}function W(a){return a.get?a.get():a}function Pa(a){var b=a.split("-");a="";t(b,function(c,d){a+=c>0?d.charAt(0).toUpperCase()+d.substr(1):d});return a}function xa(a,b,c){if(M&&da<8&&b.toLowerCase()=="class")b=
"className";a.setAttribute(b,""+c)}function ya(a){if(!a)return document;return a.ownerDocument||a.document||a}function la(a){if(!a)return J;a=ya(a);return a.parentWindow||a.defaultView}function za(a){if(!a||!a.nodeName)return"";return a.nodeName.toLowerCase()}function wb(a,b){var c=la(a),d=Pa(b),e="";if(c.getComputedStyle){c=c.getComputedStyle(a,null);e=c[d]||c.getPropertyValue(b)||a.style[d]}else if(a.currentStyle)e=a.currentStyle[d]||a.style[d];return e}function R(a){a=a||document;return a.compatMode!=
"CSS1Compat"?a.body:a.documentElement}function xb(a){a=R(a);return Math.max(a.scrollHeight,a.clientHeight)}function yb(a){a=R(a);return Math.max(a.scrollWidth,a.clientWidth)}function Aa(){var a,b;if(M||Qa){a=R().scrollLeft;b=R().scrollTop}else{a=J.scrollX;b=J.scrollY}return{x:a,y:b}}function S(a){var b=this;t(a,function(c){b[c]=this});b.length=a.length;b.doc=ya(b[0]);b.name=za(b[0]);b.type=b.length>0?b[0].nodeType:null;b.win=la(b[0]);b._data={}}function Ra(){this.collapsed=this.startContainer===this.endContainer&&
this.startOffset===this.endOffset}function Ba(a,b){function c(w,u,q){var r=w.nodeValue.length,C;if(a){C=w.cloneNode(true).splitText(u);C.splitText(q-u)}if(b){var H=w;if(u>0)H=w.splitText(u);q<r&&H.splitText(q-u);m.push(H)}return C}function d(w,u){var q;if(w.nodeType==3){q=c(w,g,j);a&&u.appendChild(q);return false}q=w.firstChild;for(var r,C=false,H=false,y=false,A=false;q;){r=new $(e);r.selectNode(q);C||(C=r.compareBoundaryPoints(ea,s)>0);if(C&&!H)H=r.compareBoundaryPoints(ma,s)>=0;if(H&&!y)y=r.compareBoundaryPoints(fa,
s)>0;if(y&&!A)A=r.compareBoundaryPoints(ga,s)>=0;if(A)return false;r=q.nextSibling;if(C)if(q.nodeType==1)if(H&&!y){a&&u.appendChild(q.cloneNode(true));b&&m.push(q)}else{var z;if(a){z=q.cloneNode(false);u.appendChild(z)}if(d(q,z)===false)return false}else if(q.nodeType==3){q=q==f&&q==i?c(q,g,j):q==f?c(q,g,q.nodeValue.length):q==i?c(q,0,j):c(q,0,q.nodeValue.length);a&&u.appendChild(q)}q=r}}var e=this.doc,f=this.startContainer,g=this.startOffset,i=this.endContainer,j=this.endOffset,m=[],s=this;if(b){s=
this.cloneRange();f.nodeType==3&&g===0&&this.setStart(f.parentNode,0);this.collapse(true)}var n=e.createDocumentFragment();d(s.commonAncestor(),n);for(var k=0,o=m.length;k<o;k++){var v=m[k];v.parentNode&&v.parentNode.removeChild(v)}return a?n:this}function aa(a,b){var c;a:{for(c=b;c;){if(h(c).name==="marquee"){c=true;break a}c=c.parentNode}c=false}c||a.moveToElementText(b)}function Sa(a,b){var c=a.parentElement().ownerDocument,d=a.duplicate();d.collapse(b);var e=d.parentElement(),f=e.childNodes;if(f.length===
0)return{node:e.parentNode,offset:h(e).index()};c=c;var g=0,i=false,j=a.duplicate();aa(j,e);for(var m=0,s=f.length;m<s;m++){var n=f[m],k=j.compareEndPoints("StartToStart",d);if(k>0)i=true;if(k===0)return{node:n.parentNode,offset:m};if(n.nodeType==1){k=a.duplicate();aa(k,n);j.setEndPoint("StartToEnd",k);if(i)g+=k.text.replace(/\r\n|\n|\r/g,"").length;else g=0}else if(n.nodeType==3){j.moveStart("character",n.nodeValue.length);g+=n.nodeValue.length}i||(c=n)}if(!i&&c.nodeType==1)return{node:e,offset:h(e.lastChild).index()+
1};j=a.duplicate();aa(j,e);j.setEndPoint("StartToEnd",d);g-=j.text.replace(/\r\n|\n|\r/g,"").length;return{node:c,offset:g}}function Ta(a){var b=a.ownerDocument,c=0;for(a=a.previousSibling;a;){if(a.nodeType==1)if(h(a).isSingle())c+=1;else{var d=b.body.createTextRange();aa(d,a);c+=d.text.length}else if(a.nodeType==3)c+=a.nodeValue.length;a=a.previousSibling}return c}function Ua(a,b){var c=a.ownerDocument||a,d=c.body.createTextRange();if(c==a){d.collapse(true);return d}if(a.nodeType==1){var e=a.childNodes,
f,g=false,i;if(b===0){f=e[0];e=true}else{f=e[b-1];e=false}if(!f){i=c.createTextNode(" ");a.appendChild(i);f=i;g=true}if(f.nodeName.toLowerCase()==="head"){if(b===1)e=true;if(b===2)e=false;d.collapse(e);return d}if(f.nodeType==1){aa(d,f);d.collapse(e)}else{aa(d,a);g&&a.removeChild(i);c=Ta(f);c=e?c:c+f.nodeValue.length;d.moveStart("character",c)}}else if(a.nodeType==3){aa(d,a.parentNode);d.moveStart("character",b+Ta(a))}return d}function $(a){this.startContainer=a;this.startOffset=0;this.endContainer=
a;this.endOffset=0;this.collapsed=true;this.doc=a}function na(a){if(!a.nodeName){if(a.get)a=a;else a:{var b;if(M){if(a.item){b=ya(a.item(0));b=new $(b);b.selectNode(a.item(0));a=b;break a}b=a.parentElement().ownerDocument;var c=Sa(a,true);a=Sa(a,false);b=new $(b);b.setStart(c.node,c.offset);b.setEnd(a.node,a.offset)}else{c=a.startContainer;b=c.ownerDocument||c;b=new $(b);b.setStart(c,a.startOffset);b.setEnd(a.endContainer,a.endOffset)}a=b}return a}return new $(a)}function ha(a,b,c){try{a.execCommand(b,
false,c)}catch(d){}}function Va(a,b){var c="";try{c=a.queryCommandValue(b)}catch(d){}if(typeof c!=="string")c="";return c}function Wa(a){var b=la(a);return b.getSelection?b.getSelection():a.selection}function Xa(a){var b=Wa(a),c;try{c=b.rangeCount>0?b.getRangeAt(0):b.createRange()}catch(d){}if(M&&(!c||!c.item&&c.parentElement().ownerDocument!==a))return null;return c}function Ya(a){var b={},c,d;t(a,function(e,f){c=e.split(",");for(var g=0,i=c.length;g<i;g++){d=c[g];b[d]=f}});return b}function Ca(a,
b){return Za(a,b,"*")||Za(a,b)}function Za(a,b,c){c=c||a.name;if(a.type!==1)return false;b=Ya(b);var d,e;if(b[c]){c=b[c].split(",");for(var f=0,g=c.length;f<g;f++){b=c[f];if(b==="*")return true;d=/^(\.?)([^=]+)(?:=([^=]+))?$/.exec(b);e=d[1]?"css":"attr";b=d[2];d=d[3]||"";if(d===""&&a[e](b)!=="")return true;if(d!==""&&a[e](b)===d)return true}}return false}function $a(a){for(var b=a.first();b;){var c=b.next();a.before(b);b=c}a.remove()}function ab(a,b,c){c=c||a.name;if(a.type===1){b=Ya(b);if(b[c]){c=
b[c].split(",");allFlag=false;for(var d=0,e=c.length;d<e;d++){b=c[d];if(b==="*"){allFlag=true;break}var f=/^(\.?)([^=]+)(?:=([^=]+))?$/.exec(b);b=f[2];f[1]?a.css(b,""):a.removeAttr(b)}allFlag&&$a(a)}}}function ba(a){for(a=a;a.first();)a=a.first();return a}function bb(a,b){a=a.clone(true);for(var c=ba(a),d=a,e=false;b;){for(;d;){if(d.name===b.name){zb(d,b.attr(),b.css());e=true}d=d.first()}e||c.append(b.clone(false));e=false;b=b.first()}return a}function zb(a,b,c){t(b,function(d,e){d!=="style"&&a.attr(d,
e)});t(c,function(d,e){a.css(d,e)})}function oa(a){var b=a.doc;this.doc=b;this.win=la(b);this.sel=Wa(b);this.range=a;this._preremove=this._preformat=null}function cb(a){if(a.nodeName){var b=a.ownerDocument||a;a=na(b).selectNodeContents(b.body).collapse(false);var c=new oa(a);c.onchange(function(){var d=Xa(b);if(d)c.range=na(d)});c.oninput(function(){c._applyPreformat()});c.oncursormove(function(){c._preformat=null;c._preremove=null});Da&&h(b).click(function(d){if(h(d.target).name==="img"){var e=Xa(b);
if(e)c.range=na(e);c.range.selectNode(d.target);c.select()}});return c}return new oa(a)}function db(a){var b=a.moveEl,c=a.moveFn,d=a.clickEl||b,e=[document],f=[{x:0,y:0}],g=[];(a.iframeFix===p?true:a.iframeFix)&&h("iframe").each(function(){e.push(Ea(this));f.push(h(this).pos())});d.mousedown(function(i){var j=d.get(),m=O(b.css("left")),s=O(b.css("top")),n=b.width(),k=b.height(),o=i.pageX,v=i.pageY,w=true;t(e,function(u,q){function r(y){if(w){var A=X(f[u].x+y.pageX-o),z=X(f[u].y+y.pageY-v);c.call(d,
m,s,n,k,A,z)}y.stop()}function C(y){y.stop()}function H(y){w=false;j.releaseCapture&&j.releaseCapture();t(g,function(){h(this.doc).unbind("mousemove",this.move).unbind("mouseup",this.up).unbind("selectstart",this.select)});y.stop()}h(q).mousemove(r).mouseup(H).bind("selectstart",C);g.push({doc:q,move:r,up:H,select:C})});j.setCapture&&j.setCapture();i.stop()})}function Y(a){function b(v,w){if(f&&(a.x===p||a.y===p)){var u=O(v)||0,q=O(w)||0;if(a.alignEl){var r=a.alignEl,C=h(r).pos();u=X(r.clientWidth/
2-u/2);q=X(r.clientHeight/2-q/2);d=u<0?C.x:C.x+u;e=q<0?C.y:C.y+q}else{C=R(n);r=Aa();d=X(r.x+(C.clientWidth-u)/2);e=X(r.y+(C.clientHeight-q)/2)}d=d<0?0:G(d);e=e<0?0:G(e);o.css({left:d,top:e})}}var c=a.name||"",d=G(a.x),e=G(a.y),f=a.z,g=G(a.width),i=G(a.height),j=a.cls,m=a.css,s=a.html,n=a.doc||document,k=a.parent||n.body,o=h('<div style="display:block;"></div>');g&&o.css("width",g);i&&o.css("height",i);f&&o.css({position:"absolute",left:d,top:e,"z-index":f});b(g,i);j&&o.addClass(j);m&&o.css(m);s&&
o.html(s);h(k).append(o);return{name:c,doc:n,div:function(){return o},remove:function(){o.remove();return this},show:function(){o.show();return this},hide:function(){o.hide();return this},draggable:function(v){v=v||{};v.moveEl=o;v.moveFn=function(w,u,q,r,C,H){if((w+=C)<0)w=0;if((u+=H)<0)u=0;o.css("left",G(w)).css("top",G(u))};db(v);return this},resetPos:b}}function Ea(a){a=W(a);return a.contentDocument||a.contentWindow.document}function Ab(a,b,c,d){var e=['<html><head><meta charset="utf-8" /><title>KindEditor</title>',
"<style>","html {margin:0;padding:0;}","body {margin:0;padding:0;}",'body, td {font:12px/1.5 "sans serif",tahoma,verdana,helvetica;}',"p {margin:5px 0;}","table {border-collapse:collapse;}","table.ke-zeroborder td {border:1px dotted #AAAAAA;}",".ke-flash {","\tborder:1px solid #AAAAAA;","\tbackground-image:url("+a+"common/flash.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}",".ke-rm {","\tborder:1px solid #AAAAAA;","\tbackground-image:url("+
a+"common/rm.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}",".ke-media {","\tborder:1px solid #AAAAAA;","\tbackground-image:url("+a+"common/media.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","</style>"];if(K(c))t(c,function(f,g){g!==""&&e.push('<link href="'+g+'" rel="stylesheet" />')});else c&&e.push('<link href="'+c+'" rel="stylesheet" />');d&&e.push("<style>"+
d+"</style>");e.push("</head><body "+(b?'class="'+b+'"':"")+"></body></html>");return e.join("")}function eb(a){var b=Y(a),c=b.remove,d=G(a.width),e=G(a.height),f=h(a.srcElement),g=ka(a.designMode,true),i=ka(a.themesPath,""),j=a.bodyClass,m=a.cssPath;a=a.cssData;var s=b.div().addClass("ke-edit"),n=h('<iframe class="ke-edit-iframe" frameborder="0"></iframe>'),k=h('<textarea class="ke-edit-textarea" kindeditor="true"></textarea>');n.css("width","100%");k.css("width","100%");b.width=function(v){s.css("width",
G(v));return b};b.height=function(v){v=G(v);s.css("height",v);n.css("height",v);if(M&&da<8||document.compatMode!="CSS1Compat")v=G(O(v)-2);k.css("height",v);return b};d&&b.width(d);e&&b.height(e);g?k.hide():n.hide();s.append(n);s.append(k);f.hide();var o=Ea(n);if(!M)o.designMode="on";o.open();o.write(Ab(i,j,m,a));o.close();if(M)o.body.contentEditable="true";b.iframe=n;b.textarea=k;b.doc=o;b.remove=function(){h(o).unbind();h(o.body).unbind();h(document).unbind();var v=b.html();f.hasVal()?f.val(v):f.html(v);
f.removeAttr("kindeditor");f.show();o.write("");o.clear();n.remove();k.remove();c.call(b);return b};b.html=function(v){if(g){var w=o.body;if(v===p)return h(w).html();h(w).html(v);return b}if(v===p)return k.val();k.val(v);return b};b.design=function(v){if(v===p?!g:v){if(!g){v=b.html();g=true;b.html(v);k.hide();n.show()}}else if(g){v=b.html();g=false;b.html(v);n.hide();k.show()}b.focus();return b};b.focus=function(){g?n.get().contentWindow.focus():k.get().focus();return b};b.html(f.hasVal()?f.val(void 0):
f.html(void 0));b.cmd=cb(o);return b}function fb(a,b){a.mouseover(function(){h(this).addClass("ke-toolbar-icon-outline-on")}).mouseout(function(){h(this).removeClass("ke-toolbar-icon-outline-on")}).click(function(c){b.click.call(this,c);c.stop()})}function gb(a){var b=Y(a),c=b.remove,d=a.disableMode===p?false:a.disableMode,e=a.noDisableItems===p?[]:a.noDisableItems,f=b.div(),g={};f.addClass("ke-toolbar").bind("contextmenu,mousedown,mousemove",function(i){i.preventDefault()});b.get=function(i){return g[i]};
b.addItem=function(i){var j;if(i.name=="|")j=h('<span class="ke-inline-block ke-toolbar-separator"></span>');else if(i.name=="/")j=h("<br />");else{j=h('<a class="ke-inline-block ke-toolbar-icon-outline" href="#" title="'+(i.title||"")+'"><span class="ke-inline-block ke-toolbar-icon ke-toolbar-icon-url ke-icon-'+i.name+'"></span></a>');fb(j,i)}j.data("item",i);g[i.name]=j;f.append(j)};b.remove=function(){t(g,function(i,j){j.remove()});c.call(b)};b.disable=function(i){var j;if(i===p?!d:i){t(g,function(m,
s){j=s.data("item");if(j.name!=="/"&&F(j.name,e)<0){s.addClass("ke-toolbar-icon-outline-disabled");s.opacity(0.5);j.name!=="|"&&s.unbind()}});d=true}else{t(g,function(m,s){j=s.data("item");if(j.name!=="/"&&F(j.name,e)<0){s.removeClass("ke-toolbar-icon-outline-disabled");s.opacity(1);j.name!=="|"&&fb(s,j)}});d=false}};return b}function hb(a){a.z=a.z||811213;var b=Y(a),c=b.div(),d=b.remove,e=a.centerLineMode===p?true:a.centerLineMode;c.addClass("ke-menu");b.addItem=function(f){if(f.title==="-")c.append(h('<div class="ke-menu-separator"></div>'));
else{var g=h('<div class="ke-menu-item"></div>'),i=h('<div class="ke-inline-block ke-menu-item-left"></div>'),j=h('<div class="ke-inline-block ke-menu-item-right"></div>'),m=G(f.height),s=f.iconClass;c.append(g);if(m){g.css("height",m);j.css("line-height",m)}var n;if(e){n=h('<div class="ke-inline-block ke-menu-item-center"></div>');m&&n.css("height",m)}g.mouseover(function(){h(this).addClass("ke-menu-item-on");n&&n.addClass("ke-menu-item-center-on")});g.mouseout(function(){h(this).removeClass("ke-menu-item-on");
n&&n.removeClass("ke-menu-item-center-on")});g.click(function(k){f.click.call(h(this));k.stop()});g.append(i);n&&g.append(n);g.append(j);if(f.checked)s="ke-icon-checked";i.html('<span class="ke-inline-block ke-toolbar-icon ke-toolbar-icon-url '+s+'"></span>');j.html(f.title)}};b.remove=function(){h(".ke-menu-item",c.get()).remove();d.call(b)};return b}function ib(a){function b(k,o,v){k=h(k).addClass(v);e===o.toLowerCase()&&k.addClass("ke-colorpicker-cell-selected");k.attr("title",o||a.noColor);k.mouseover(function(){h(this).addClass("ke-colorpicker-cell-on")});
k.mouseout(function(){h(this).removeClass("ke-colorpicker-cell-on")});k.click(function(w){a.click.call(h(this),o);w.stop()});o?k.append(h('<div class="ke-colorpicker-cell-color"></div>').css("background-color",o)):k.html(a.noColor);g.push(k)}a.z=a.z||811213;var c=Y(a),d=a.colors||[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666",
"#333333","#000000"]],e=(a.selectedColor||"").toLowerCase(),f=c.remove,g=[];c.div().addClass("ke-colorpicker");var i=c.doc.createElement("table");c.div().append(i);i.className="ke-colorpicker-table";i.cellPadding=0;i.cellSpacing=0;i.border=0;var j=i.insertRow(0),m=j.insertCell(0);m.colSpan=d[0].length;b(m,"","ke-colorpicker-cell-top");for(var s=0;s<d.length;s++){j=i.insertRow(s+1);for(var n=0;n<d[s].length;n++){m=j.insertCell(n);b(m,d[s][n],"ke-colorpicker-cell")}}c.remove=function(){t(g,function(){this.unbind()});
f.call(c)};return c}function jb(a){a.z=a.z||811213;var b=Y(a),c=b.remove,d=G(a.width),e=G(a.height),f=b.doc,g=b.div(),i=a.title,j=h(a.body,f),m=a.previewBtn,s=a.yesBtn,n=a.noBtn,k=a.closeBtn;a=a.shadowMode===p?true:a.shadowMode;var o=f.documentElement,v=Math.max(o.scrollWidth,o.clientWidth);o=Math.max(o.scrollHeight,o.clientHeight);g.addClass("ke-dialog").bind("click,mousedown",function(I){I.stopPropagation()});var w;if(a){f=f.createElement("table");f.className="ke-dialog-table";f.cellPadding=0;f.cellSpacing=
0;f.border=0;g.append(f);var u=["t","m","b"],q=["l","c","r"],r,C,H,y;r=0;for(len=3;r<len;r++){H=f.insertRow(r);C=0;for(l=3;C<l;C++){y=H.insertCell(C);y.className="ke-"+u[r]+q[C];if(r==1&&C==1)w=h(y);else y.innerHTML='<span class="ke-dialog-empty"></span>'}}w.css({width:d,height:e,"vertical-align":"top"})}else{g.addClass("ke-dialog-no-shadow");w=g}var A=h('<div class="ke-dialog-header"></div>');w.append(A);A.html(i);var z=h('<span class="ke-dialog-icon-close ke-dialog-icon-close-'+(a?"":"no-")+'shadow" title="'+
k.name+'"></span>').click(k.click);A.append(z);b.draggable({clickEl:A});var x=h('<div class="ke-dialog-body"></div>');w.append(x);x.append(j);var D=h('<div class="ke-dialog-footer"></div>');if(m||s||n)w.append(D);t([{btn:m,name:"preview"},{btn:s,name:"yes"},{btn:n,name:"no"}],function(){var I=this.btn;if(I){var N=h('<input type="button" class="ke-dialog-'+this.name+'" value="'+I.name+'" />');D.append(N);N.click(I.click)}});e&&x.height(O(e)-A.height()-D.height());var E=Y({x:0,y:0,z:811212,cls:"ke-dialog-mask",
width:v,height:o});b.resetPos(g.width(),g.height());b.remove=function(){E.remove();z.remove();h("input",g.get()).remove();D.remove();x.remove();A.remove();c.call(b)};b.show=function(){E.show();g.show()};b.hide=function(){E.hide();g.hide()};return b}function kb(a,b){var c=document.getElementsByTagName("head")[0]||document.documentElement,d=document.createElement("script");c.appendChild(d);d.src=a;d.charset="utf-8";d.onload=d.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"){b();
d.onload=d.onreadystatechange=null;c.removeChild(d)}}}function lb(a){var b,c="core";if(b=/^(\w+)\.(\w+)$/.exec(a)){c=b[1];a=b[2]}return{ns:c,key:a}}function mb(a,b){b=b===p?ia.langType:b;if(typeof a==="string"){if(!Z[b])return"no language";var c=a.length-1;if(a.substr(c)===".")return Z[b][a.substr(0,c)];c=lb(a);return Z[b][c.ns][c.key]}t(a,function(d,e){var f=lb(d);Z[b]||(Z[b]={});Z[b][f.ns]||(Z[b][f.ns]={});Z[b][f.ns][f.key]=e})}function nb(a){var b=this;t(a,function(d){b[d]=a[d];if(d==="scriptPath"){b.themesPath=
a[d]+"themes/";b.pluginsPath=a[d]+"plugins/"}});t(ia,function(d,e){if(b[d]===p)b[d]=e});var c=h(b.srcElement);if(!b.width)b.width=c.width()||b.minWidth;if(!b.height)b.height=c.height()||b.minHeight;b.width=G(b.width);b.height=G(b.height);b.srcElement=c;b._handlers={};t(Fa,function(d,e){e.call(b,KindEditor)})}var T=navigator.userAgent.toLowerCase(),M=T.indexOf("msie")>-1&&T.indexOf("opera")==-1,Ga=T.indexOf("gecko")>-1&&T.indexOf("khtml")==-1,Da=T.indexOf("applewebkit")>-1,Qa=T.indexOf("opera")>-1,
da=(T=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(T))?T[1]:"0",X=Math.round,h={kindeditor:"4.0 (2010-07-29)",IE:M,GECKO:Ga,WEBKIT:Da,OPERA:Qa,VERSION:da,each:t,isArray:K,isFunction:function(a){if(!a)return false;return Object.prototype.toString.call(a)==="[object Function]"},inArray:F,inString:P,trim:L,addUnit:G,removeUnit:O,escape:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},unescape:function(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,
">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},toHex:ja,toMap:Q,toArray:ta,undef:ka,json:function(a){var b;if(b=/\{[\s\S]*\}|\[[\s\S]*\]/.exec(a))a=b[0];b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;b.lastIndex=0;if(b.test(a))a=a.replace(b,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+a+")");throw"JSON parse error";}},ob=Q("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),Ma=Q("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),La=Q("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed");
Q("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");Q("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected");var pb=Q("input,button,textarea,select"),ia={designMode:true,fullscreenMode:false,filterMode:false,shadowMode:true,scriptPath:function(){for(var a=document.getElementsByTagName("script"),b,c=0,d=a.length;c<d;c++){b=a[c].src||"";if(/kindeditor[\w\-\.]*\.js/.test(b))return b.substring(0,b.lastIndexOf("/")+1)}return""}(),langType:"zh_CN",urlType:"",
newlineType:"p",resizeType:2,dialogAlignType:"page",bodyClass:"ke-content",cssPath:"",cssData:"",minWidth:550,minHeight:100,minChangeSize:5,shortcutKeys:{undo:"Z",redo:"Y",bold:"B",italic:"I",underline:"U",selectall:"A",print:"P"},items:["source","|","fullscreen","undo","redo","print","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","|","selectall","/",
"formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","removeformat","|","image","flash","media","table","hr","emoticons","link","unlink","|","about"],noDisableItems:"source,fullscreen".split(","),colors:[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]],
htmlTags:{font:["color","size","face",".background-color"],span:[".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align"],div:["align",".border",".margin",".padding",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".background",".font-style",".text-decoration",".vertical-align",".margin-left"],table:["border","cellspacing","cellpadding","width","height","align","bordercolor",".padding",
".margin",".border","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".background",".width",".height"],"td,th":["align","valign","width","height","colspan","rowspan","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".vertical-align",".background"],a:["href","target","name"],embed:["src","width","height","type","loop","autostart","quality",
".width",".height","align","allowscriptaccess","/"],img:["src","width","height","border","alt","title",".width",".height","/"],hr:["/"],br:["/"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["align",".text-align",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],"tbody,tr,strong,b,sub,sup,em,i,u,strike":[]}};ia.themesPath=ia.scriptPath+"themes/";ia.pluginsPath=ia.scriptPath+"plugins/";
var ub="altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,layerX,layerY,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which".split(","),U=[],B={};M&&J.attachEvent("onunload",function(){t(U,function(a,b){b&&V(b)})});h.ctrl=function(a,b,c){b=/^\d{2,}$/.test(b)?b:b.toUpperCase().charCodeAt(0);
ca(a,"keydown",function(d){if(d.ctrlKey&&d.which==b&&!d.shiftKey&&!d.altKey){c.call(a);d.stop()}})};h.ready=function(a,b){function c(){if(!f){f=true;a(KindEditor)}V(b,"DOMContentLoaded");V(b,"readystatechange");V(e,"load")}function d(){if(!f){try{b.documentElement.doScroll("left")}catch(g){e.setTimeout(d,0);return}c()}}b=b||document;var e=b.parentWindow||b.defaultView,f=false;if(b.addEventListener)ca(b,"DOMContentLoaded",c);else if(b.attachEvent){ca(b,"readystatechange",function(){b.readyState===
"complete"&&c()});b.documentElement.doScroll&&e.frameElement===p&&d()}ca(e,"load",c)};h.formatUrl=Ka;h.formatHtml=qa;h.mediaType=Na;h.mediaAttrs=function(a){return va(unescape(a))};h.mediaEmbed=Oa;h.mediaImg=function(a,b){var c=b.width,d=b.height,e=b.type||Na(b.src),f=Oa(b),g="";if(c>0)g+="width:"+c+"px;";if(d>0)g+="height:"+d+"px;";c='<img class="'+(/realaudio/i.test(e)?"ke-rm":/flash/i.test(e)?"ke-flash":"ke-media")+'" src="'+a+'" ';if(g!=="")c+='style="'+g+'" ';c+='kesrctag="'+escape(f)+'" alt="" />';
return c};h.query=function(a,b){var c=wa(a,b);return c.length>0?c[0]:null};h.queryAll=wa;S.prototype={each:function(a){for(var b=0;b<this.length;b++)if(a.call(this[b],b,this[b])===false)return this;return this},bind:function(a,b){this.each(function(){ca(this,a,b)});return this},unbind:function(a,b){this.each(function(){V(this,a,b)});return this},fire:function(a){if(this.length<1)return this;Ia(this[0],a);return this},hasAttr:function(a){if(this.length<1)return null;return sa(this[0],a)},attr:function(a,
b){var c=this;if(a===p)return va(c.outer());if(typeof a==="object"){t(a,function(d,e){c.attr(d,e)});return c}if(b===p){b=c.length<1?null:sa(c[0],a);return b===null?"":b}c.each(function(){xa(this,a,b)});return c},removeAttr:function(a){this.each(function(){var b=a;if(M&&da<8&&b.toLowerCase()=="class")b="className";xa(this,b,"");this.removeAttribute(b)});return this},get:function(a){if(this.length<1)return null;return this[a||0]},hasClass:function(a){if(this.length<1)return false;return P(a,this[0].className,
" ")},addClass:function(a){this.each(function(){if(!P(a,this.className," "))this.className=L(this.className+" "+a)});return this},removeClass:function(a){this.each(function(){if(P(a,this.className," "))this.className=L(this.className.replace(new RegExp("\\s*"+a+"\\s*"),""))});return this},html:function(a){if(a===p){if(this.length<1)return"";return qa(this[0].innerHTML)}this.each(function(){var b=qa(a);if(this.nodeType==1)this.innerHTML=""+b});return this},hasVal:function(){if(this.length<1)return false;
return!!pb[za(this[0])]},val:function(a){if(a===p){if(this.length<1)return"";return this.hasVal()?this[0].value:this.attr("value")}else{this.each(function(){if(pb[za(this)])this.value=a;else xa(this,"value",a)});return this}},css:function(a,b){var c=this;if(a===p)return Ja(c.attr("style"));if(typeof a==="object"){t(a,function(d,e){c.css(d,e)});return c}if(b===p){if(c.length<1)return"";return c[0].style[a]||wb(c[0],a)||""}c.each(function(){this.style[Pa(a)]=b});return c},width:function(a){if(a===p){if(this.length<
1)return 0;return this[0].offsetWidth}return this.css("width",G(a))},height:function(a){if(a===p){if(this.length<1)return 0;return this[0].offsetHeight}return this.css("height",G(a))},opacity:function(a){this.each(function(){if(this.style.opacity===p)this.style.filter=a==1?"":"alpha(opacity="+a*100+")";else this.style.opacity=a==1?"":a});return this},data:function(a,b){if(b===p)return this._data[a];this._data[a]=b;return this},pos:function(){var a=this[0],b=0,c=0;if(a)if(a.getBoundingClientRect){a=
a.getBoundingClientRect();c=Aa();b=a.left+c.x;c=a.top+c.y}else for(;a;){b+=a.offsetLeft;c+=a.offsetTop;a=a.offsetParent}return{x:X(b),y:X(c)}},clone:function(a){if(this.length<1)return new S([]);return new S([this[0].cloneNode(a)])},append:function(a){if(this.length<1)return this;this[0].appendChild(W(a));return this},before:function(a){if(this.length<1)return this;this[0].parentNode.insertBefore(W(a),this[0]);return this},after:function(a){if(this.length<1)return this;this[0].nextSibling?this[0].parentNode.insertBefore(W(a),
this[0].nextSibling):this[0].appendChild(W(a));return this},replaceWith:function(a){a=W(a);if(this.length<1)return this;V(this[0]);this[0].parentNode.replaceChild(a,this[0]);this[0]=a;return this},remove:function(){var a=this;a.each(function(b,c){V(c);if(c.hasChildNodes())c.innerHTML="";c.parentNode&&c.parentNode.removeChild(c);delete a[b]});a.length=0;return a},show:function(a){return this.css("display",a===p?"block":a)},hide:function(){return this.css("display","none")},outer:function(){if(this.length<
1)return"";var a=this.doc.createElement("div");a.appendChild(this[0].cloneNode(true));return qa(a.innerHTML)},isSingle:function(){return!!La[this.name]},isInline:function(){return!!ob[this.name]},isBlock:function(){return!!Ma[this.name]},contains:function(a){if(this.length<1)return false;return ra(this[0],W(a))},parent:function(){if(this.length<1)return null;var a=this[0].parentNode;return a?new S([a]):null},children:function(){if(this.length<1)return[];for(var a=[],b=this[0].firstChild;b;){if(b.nodeType!=
3||L(b.nodeValue)!=="")a.push(new S([b]));b=b.nextSibling}return a},first:function(){var a=this.children();return a.length>0?a[0]:null},last:function(){var a=this.children();return a.length>0?a[a.length-1]:null},index:function(){if(this.length<1)return-1;for(var a=-1,b=this[0];b;){a++;b=b.previousSibling}return a},prev:function(){if(this.length<1)return null;var a=this[0].previousSibling;return a?new S([a]):null},next:function(){if(this.length<1)return null;var a=this[0].nextSibling;return a?new S([a]):
null},scan:function(a,b){function c(d){for(d=b?d.firstChild:d.lastChild;d;){var e=b?d.nextSibling:d.previousSibling;if(a(d)===false)return false;if(c(d)===false)return false;d=e}}if(!(this.length<1)){b=b===p?true:b;c(this[0]);return this}}};t("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error".split(","),function(a,b){S.prototype[b]=function(c){return c?this.bind(b,
c):this.fire(b)}});Ga=h;h=function(a,b){function c(i){i[0]||(i=[]);return new S(i)}if(typeof a==="string"){if(b)b=W(b);var d=a.length;if(a.charAt(0)==="@")a=a.substr(1);if(a.length!==d||/<.+>/.test(a)){d=(b?b.ownerDocument||b:document).createElement("div");var e=[];if(d.nodeType==1)d.innerHTML=""+a;for(var f=0,g=d.childNodes.length;f<g;f++)e.push(d.childNodes[f]);return c(e)}return c(wa(a,b))}if(a&&a.get)return a;if(K(a))return c(a);return c(ta(arguments))};t(Ga,function(a,b){h[a]=b});if(J.K===p)J.K=
h;J.KindEditor=h;var ma=0,ea=1,fa=2,ga=3;$.prototype={commonAncestor:function(){function a(j){for(var m=[];j;){m.push(j);j=j.parentNode}return m}for(var b=a(this.startContainer),c=a(this.endContainer),d=0,e=b.length,f=c.length,g,i;++d;){g=b[e-d];i=c[f-d];if(!g||!i||g!==i)break}return b[e-d+1]},setStart:function(a,b){var c=this.doc;this.startContainer=a;this.startOffset=b;if(this.endContainer===c){this.endContainer=a;this.endOffset=b}Ra.call(this);return this},setEnd:function(a,b){var c=this.doc;this.endContainer=
a;this.endOffset=b;if(this.startContainer===c){this.startContainer=a;this.startOffset=b}Ra.call(this);return this},setStartBefore:function(a){return this.setStart(a.parentNode||this.doc,h(a).index())},setStartAfter:function(a){return this.setStart(a.parentNode||this.doc,h(a).index()+1)},setEndBefore:function(a){return this.setEnd(a.parentNode||this.doc,h(a).index())},setEndAfter:function(a){return this.setEnd(a.parentNode||this.doc,h(a).index()+1)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},
selectNodeContents:function(a){var b=h(a);if(b.type==3||b.isSingle())return this.selectNode(a);b=b.children();if(b.length>0)return this.setStartBefore(b[0].get()).setEndAfter(b[b.length-1].get());return this.setStart(a,0).setEnd(a,0)},collapse:function(a){if(a)return this.setEnd(this.startContainer,this.startOffset);return this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(a,b){var c=this.get(),d=b.get();if(this.doc.createRange)return c.compareBoundaryPoints(a,d);else{var e=
{};e[ma]="StartToStart";e[ea]="EndToStart";e[fa]="EndToEnd";e[ga]="StartToEnd";c=c.compareEndPoints(e[a],d);if(c!==0)return c;var f,g,i,j;if(a===ma||a===ga){f=this.startContainer;i=this.startOffset}if(a===ea||a===fa){f=this.endContainer;i=this.endOffset}if(a===ma||a===ea){g=b.startContainer;j=b.startOffset}if(a===fa||a===ga){g=b.endContainer;j=b.endOffset}if(f===g){f=i-j;return f>0?1:f<0?-1:0}for(c=g;c&&c.parentNode!==f;)c=c.parentNode;if(c)return h(c).index()>=i?-1:1;for(c=f;c&&c.parentNode!==g;)c=
c.parentNode;if(c)return h(c).index()>=j?1:-1}},cloneRange:function(){return(new $(this.doc)).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},toString:function(){var a=this.get();return(this.doc.createRange?a.toString():a.text).replace(/\r\n|\n|\r/g,"")},cloneContents:function(){return Ba.call(this,true,false)},deleteContents:function(){return Ba.call(this,false,true)},extractContents:function(){return Ba.call(this,true,true)},insertNode:function(a){var b=
this.startContainer,c=this.startOffset,d=this.endContainer,e=this.endOffset,f,g,i,j=1;if(a.nodeName.toLowerCase()==="#document-fragment"){f=a.firstChild;g=a.lastChild;j=a.childNodes.length}if(b.nodeType==1)if(i=b.childNodes[c]){b.insertBefore(a,i);if(b===d)e+=j}else b.appendChild(a);else if(b.nodeType==3)if(c===0){b.parentNode.insertBefore(a,b);if(b.parentNode===d)e+=j}else if(c>=b.nodeValue.length)b.nextSibling?b.parentNode.insertBefore(a,b.nextSibling):b.parentNode.appendChild(a);else{i=b.splitText(c);
b.parentNode.insertBefore(a,i);if(b===d){d=i;e-=c}}f?this.setStartBefore(f).setEndAfter(g):this.selectNode(a);if(this.compareBoundaryPoints(fa,this.cloneRange().setEnd(d,e))>=1)return this;return this.setEnd(d,e)},surroundContents:function(a){a.appendChild(this.extractContents());return this.insertNode(a).selectNode(a)},isControl:function(){var a=this.startContainer,b=this.startOffset,c=this.endContainer,d=this.endOffset;return a.nodeType==1&&a===c&&b+1===d&&h(a.childNodes[b]).name==="img"},get:function(a){var b=
this.doc,c=this.startContainer,d=this.startOffset,e=this.endContainer,f=this.endOffset;if(b.createRange){a=b.createRange();try{a.setStart(c,d);a.setEnd(e,f)}catch(g){}return a}if(a&&this.isControl()){a=b.body.createControlRange();a.addElement(c.childNodes[d]);return a}a=b.body.createTextRange();a.setEndPoint("StartToStart",Ua(c,d));a.setEndPoint("EndToStart",Ua(e,f));return a},html:function(){return h(this.cloneContents()).outer()}};h.range=na;h.START_TO_START=ma;h.START_TO_END=ea;h.END_TO_END=fa;
h.END_TO_START=ga;var qb=Q("9,32,48..57,59,61,65..90,106,109..111,188,190..192,219..222"),rb=Q("8,13,33..40,46"),Ha={};t(qb,function(a,b){Ha[a]=b});t(rb,function(a,b){Ha[a]=b});oa.prototype={select:function(){var a=this.sel,b=this.range.cloneRange(),c=b.startContainer,d=c.ownerDocument||c,e=la(d);if(M&&c.nodeType==1&&b.collapsed){a=h("<span>&nbsp;</span>",d);b.insertNode(a.get());b=d.body.createTextRange();b.moveToElementText(a.get());b.collapse(false);b.select();a.remove();e.focus();return this}b=
b.get(true);if(M)b.select();else{a.removeAllRanges();a.addRange(b)}e.focus();return this},wrap:function(a){function b(n,k,o){var v=n.nodeValue.length,w=n;if(!(o<=k)){if(k>0)w=n.splitText(k);o<v&&w.splitText(o-k);var u;o=h(w);k=g==n;for(n=j==n;(u=o.parent())&&u.isInline()&&u.children().length==1;){k||(k=g==u.get());n||(n=j==u.get());o=u}u=o;o=f;o=o.clone(true);if(u.type==3){ba(o).append(u.clone(false));u.before(o);u.remove()}else{v=u;for(var q;(q=u.first())&&q.children().length==1;)u=q;for(w=u.doc.createDocumentFragment();q=
u.first();){q.next();w.appendChild(q.get())}o=bb(v,o);w.firstChild&&ba(o).append(w);v.before(o);v.remove()}q=o.get();k&&e.setStartBefore(q);n&&e.setEndAfter(q)}}function c(n){var k=n.firstChild;if(n.nodeType==3){b(n,i,m);return false}for(var o;k;){n=na(d);n.selectNode(k);if(n.compareBoundaryPoints(ga,e)>=0)return false;o=k.nextSibling;if(n.compareBoundaryPoints(ea,e)>0)if(k.nodeType==1){if(c(k)===false)return false}else if(k.nodeType==3)if(k==g&&k==j)b(k,i,m);else if(k==g)b(k,i,k.nodeValue.length);
else k==j?b(k,0,m):b(k,0,k.nodeValue.length);k=o}}var d=this.doc,e=this.range,f,g=e.startContainer,i=e.startOffset,j=e.endContainer,m=e.endOffset;f=typeof a=="string"?h(a,d):a;if(e.collapsed){if(this._preformat)f=bb(this._preformat.wrapper,f);a=0;if(g.nodeType==3)a=g.nodeValue.length;else if(i>0)a=g.childNodes[i-1].nodeValue.length;this._preformat={wrapper:f,textLength:a,range:e.cloneRange()};return this}if(!f.isInline()){for(var s=a=f.clone(true);s.first();)s=s.first();s.append(e.extractContents());
e.insertNode(a.get()).selectNode(a.get());return this}c(e.commonAncestor());return this},split:function(a,b){for(var c=this.range,d=c.doc,e=c.cloneRange().collapse(a),f=e.startContainer,g=e.startOffset,i=f.nodeType==3?f.parentNode:f,j=false,m;i&&i.parentNode;){m=h(i);if(!m.isInline())break;if(!Ca(m,b))break;j=true;i=i.parentNode}if(j){d=d.createElement("span");c.cloneRange().collapse(!a).insertNode(d);a?e.setStartBefore(i.firstChild).setEnd(f,g):e.setStart(f,g).setEndAfter(i.lastChild);f=e.extractContents();
g=f.firstChild;j=f.lastChild;if(a){e.insertNode(f);c.setStartAfter(j).setEndBefore(d)}else{i.appendChild(f);c.setStartBefore(d).setEndBefore(g)}e=d.parentNode;e.removeChild(d);!a&&e===c.endContainer&&c.setEnd(c.endContainer,c.endOffset-1)}return this},remove:function(a){var b=this.range;if(b.collapsed){this._preremove={map:a,range:b.cloneRange()};return this}this.split(true,a);this.split(false,a);var c=[];h(b.commonAncestor()).scan(function(j){c.push(h(j))});var d=b.startContainer,e=b.startOffset,
f=b.endContainer,g=b.endOffset;if(e>0){var i=h(d.childNodes[e-1]);if(i&&ba(i).isInline()){i.remove();b.setStart(d,e-1);d==f&&b.setEnd(f,g-1)}if((i=h(d.childNodes[e]))&&ba(i).isInline()){i.remove();d==f&&b.setEnd(f,g-1)}}(b=h(f.childNodes[b.endOffset]))&&ba(b).isInline()&&b.remove();t(c,function(){ab(this,a,"*");ab(this,a)});return this},_applyPreformat:function(){var a=this.range,b=a.startContainer,c=a.startOffset,d=this._preformat,e=this._preremove;if(d||e){d?a.setStart(d.range.startContainer,d.range.startOffset):
a.setStart(e.range.startContainer,e.range.startOffset);if(d){a.collapsed&&c>0&&a.setStart(b.childNodes[c-1],d.textLength);this.wrap(d.wrapper)}if(e){if(a.collapsed){this._preremove=this._preformat=null;return}this.remove(e.map)}b=a.startContainer;c=a.startOffset;b=ba(h(b.nodeType==3?b:b.childNodes[c])).get();a.setEnd(b,b.nodeValue.length);a.collapse(false);this.select();this._preremove=this._preformat=null}},commonNode:function(a){var b=this.range,c=b.endContainer;b=b.endOffset;for(b=c=c.nodeType==
3||b===0?c:c.childNodes[b-1];b&&(b=b.firstChild)&&b.childNodes.length==1;)if(Ca(h(b),a))return h(b);for(;c;){if(Ca(h(c),a))return h(c);c=c.parentNode}return null},state:function(a){var b=this.doc,c=false;try{c=b.queryCommandState(a)}catch(d){}return c},val:function(a){var b=this.doc;a=a.toLowerCase();var c="";if(a==="fontfamily"||a==="fontname"){c=Va(b,"fontname");c=c.replace(/['"]/g,"");return c.toLowerCase()}if(a==="formatblock"){c=Va(b,a);if(c==="")if(a=this.commonNode({"h1,h2,h3,h4,h5,h6,p,div,pre,address":"*"}))c=
a.name;if(c==="Normal")c="p";return c.toLowerCase()}if(a==="fontsize"){if(a=this.commonNode({"*":".font-size"}))c=a.css("font-size");return c.toLowerCase()}if(a==="forecolor"){if(a=this.commonNode({"*":".color"}))c=a.css("color");c=ja(c);if(c==="")c="default";return c.toLowerCase()}if(a==="hilitecolor"){if(a=this.commonNode({"*":".background-color"}))c=a.css("background-color");c=ja(c);if(c==="")c="default";return c.toLowerCase()}if(a==="createlink"){if(a=this.commonNode({a:"*"}))c=a.attr("href");
return c}return c},toggle:function(a,b){this.commonNode(b)?this.remove(b):this.wrap(a);return this.select()},bold:function(){return this.toggle("<strong></strong>",{span:".font-weight=bold",strong:"*",b:"*"})},italic:function(){return this.toggle("<em></em>",{span:".font-style=italic",em:"*",i:"*"})},underline:function(){return this.toggle("<u></u>",{span:".text-decoration=underline",u:"*"})},strikethrough:function(){return this.toggle("<s></s>",{span:".text-decoration=line-through",s:"*"})},forecolor:function(a){return this.toggle('<span style="color:'+
a+';"></span>',{span:".color="+a,font:"color"})},hilitecolor:function(a){return this.toggle('<span style="background-color:'+a+';"></span>',{span:".background-color="+a})},fontsize:function(a){return this.toggle('<span style="font-size:'+a+';"></span>',{span:".font-size="+a,font:"size"})},fontname:function(a){return this.fontfamily(a)},fontfamily:function(a){return this.toggle('<span style="font-family:'+a+';"></span>',{span:".font-family="+a,font:"face"})},removeformat:function(){var a={"*":"class,style"};
t(ob,function(b){a[b]="*"});this.remove(a);return this.select()},inserthtml:function(a){var b=this.doc,c=this.range,d=b.createDocumentFragment();h("@"+a,b).each(function(){d.appendChild(this)});c.deleteContents();c.insertNode(d);c.collapse(false);return this.select()},hr:function(){return this.inserthtml("<hr />")},print:function(){this.win.print();return this},insertimage:function(a,b,c,d,e,f){b=ka(b,"");e=ka(e,0);a='<img src="'+a+'" ';if(c)a+='width="'+c+'" ';if(d)a+='height="'+d+'" ';if(b)a+='title="'+
b+'" ';if(f)a+='align="'+f+'" ';a+='alt="'+b+'" ';a+='border="'+e+'" />';return this.inserthtml(a)},createlink:function(a,b){var c=this.doc,d=this.range;this.select();var e=this.commonNode({a:"*"});if(e&&!d.isControl()){d.selectNode(e.get());this.select()}if(d.collapsed){c='<a href="'+a+'"';if(b)c+=' target="'+b+'"';c+=">"+a+"</a>";this.inserthtml(c);return this}ha(c,"createlink","__ke_temp_url__");e=this.commonNode({a:"*"});h('a[href="__ke_temp_url__"]',e?e.parent():c).each(function(){h(this).attr("href",
a);b?h(this).attr("target",b):h(this).removeAttr("target")});return this},unlink:function(){var a=this.doc,b=this.range;this.select();if(b.collapsed){var c=this.commonNode({a:"*"});if(c){b.selectNode(c.get());this.select()}ha(a,"unlink",null);if(Da&&h(b.startContainer).name==="img"){a=h(b.startContainer).parent();a.name==="a"&&$a(a)}return this}ha(a,"unlink",null);return this},oninput:function(a){h(this.doc).keyup(function(b){if(!b.ctrlKey&&!b.altKey&&qb[b.which]){a(b);b.stop()}});return this},oncursormove:function(a){var b=
this.doc;h(b).keyup(function(c){if(!c.ctrlKey&&!c.altKey&&rb[c.which]){a(c);c.stop()}});h(b).mouseup(a);return this},onchange:function(a){function b(e){setTimeout(function(){a(e)},1)}var c=this.doc,d=c.body;h(c).keyup(function(e){if(!e.ctrlKey&&!e.altKey&&Ha[e.which]){a(e);e.stop()}});h(c).mouseup(a);c!==document&&h(document).mousedown(a);h(d).bind("paste",b);h(d).bind("cut",b);return this}};t("formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript".split(","),
function(a,b){oa.prototype[b]=function(c){ha(this.doc,b,c);return this}});t("cut,copy,paste".split(","),function(a,b){oa.prototype[b]=function(){if(!this.doc.queryCommandSupported(b))throw"not supported";ha(this.doc,b,null);return this}});h.cmd=cb;h.widget=Y;h.edit=eb;h.iframeDoc=Ea;h.toolbar=gb;h.menu=hb;h.colorpicker=ib;h.dialog=jb;h.tabs=function(a){var b=Y(a),c=b.remove,d=a.afterSelect;a=b.div();var e=[];a.addClass("ke-tabs").bind("contextmenu,mousedown,mousemove",function(g){g.preventDefault()});
var f=h('<ul class="ke-tabs-ul ke-clearfix"></ul>');a.append(f);b.add=function(g){var i=h('<li class="ke-tabs-li">'+g.title+"</li>");i.data("tab",g);e.push(i);f.append(i)};b.selectedIndex=0;b.select=function(g){b.selectedIndex=g;t(e,function(i,j){j.unbind();if(i===g){j.addClass("ke-tabs-li-selected");h(j.data("tab").panel).show("")}else{j.removeClass("ke-tabs-li-selected").removeClass("ke-tabs-li-on").mouseover(function(){h(this).addClass("ke-tabs-li-on")}).mouseout(function(){h(this).removeClass("ke-tabs-li-on")}).click(function(){b.select(i)});
h(j.data("tab").panel).hide()}});d&&d.call(b,g)};b.remove=function(){t(e,function(){this.remove()});f.remove();c.call(b)};return b};h.getScript=kb;var Fa={},Z={};nb.prototype={lang:function(a){return mb(a,this.langType)},handler:function(a,b){var c=this;c._handlers[a]||(c._handlers[a]=[]);if(b===p){t(c._handlers[a],function(){this.call(c)});return c}c._handlers[a].push(b);return c},clickToolbar:function(a,b){var c=this,d="clickToolbar"+a;if(b===p){if(c._handlers[d])return c.handler(d);kb(c.pluginsPath+
a+"/"+a+".js",function(){Fa[a].call(c,KindEditor);c.handler(d)});return c}return this.handler("clickToolbar"+a,b)},afterCreate:function(a){return this.handler("afterCreate",a)},beforeHideMenu:function(a){return this.handler("beforeHideMenu",a)},create:function(){function a(){b.container&&b.resize(R().clientWidth,R().clientHeight)}var b=this,c=b.fullscreenMode;if(c)R().style.overflow="hidden";else R().style.overflow="auto";var d=c?yb()+"px":b.width,e=c?xb()+"px":b.height,f=h('<div class="ke-container"></div>').css("width",
d);if(c){var g=Aa();f.css({position:"absolute",left:G(g.x),top:G(g.y),"z-index":811211});h(document.body).append(f)}else b.srcElement.before(f);var i=gb({parent:f,noDisableItems:b.noDisableItems});t(b.items,function(s,n){i.addItem({name:n,title:b.lang(n),click:function(){if(b.menu){var k=b.menu.name;b.hideMenu();if(k===n)return}b.clickToolbar(n)}})});b.designMode||i.disable(true);g=eb({parent:f,srcElement:b.srcElement,designMode:b.designMode,themesPath:b.themesPath,bodyClass:b.bodyClass,cssPath:b.cssPath,
cssData:b.cssData});h(g.doc,document).click(function(){b.menu&&b.hideMenu()});var j=h('<div class="ke-statusbar"></div>'),m;f.append(j);if(!c){m=h('<span class="ke-inline-block ke-statusbar-right-icon"></span>');j.append(m);db({moveEl:f,clickEl:m,moveFn:function(s,n,k,o,v,w){k+=v;o+=w;k>=b.minWidth&&b.resize(k,null);o>=b.minHeight&&b.resize(null,o)}})}if(b._resizeListener){h(J).unbind("resize",b._resizeListener);b._resizeListener=null}if(b.fullscreenMode){h(J).bind("resize",a);b._resizeListener=a}b.container=
f;b.toolbar=i;b.edit=g;b.statusbar=j;b.menu=b.dialog=null;b._rightIcon=m;b.resize(d,e);b.afterCreate();return b},remove:function(){this.menu&&this.hideMenu();this.dialog&&this.hideDialog();this.toolbar.remove();this.edit.remove();this._rightIcon&&this._rightIcon.remove();this.statusbar.remove();this.container.remove();this.container=this.toolbar=this.edit=this.menu=this.dialog=null;return this},resize:function(a,b){a!==null&&this.container.css("width",G(a));if(b!==null){b=O(b)-this.toolbar.div().height()-
this.statusbar.height()-11;b>0&&this.edit.height(b)}return this},select:function(){this.edit.cmd.select();return this},html:function(a){if(a===p)return this.edit.html();this.edit.html(a);return this},insertHtml:function(a){this.edit.cmd.inserthtml(a);return this},val:function(a){return this.edit.cmd.val(a)},state:function(a){return this.edit.cmd.state(a)},exec:function(a){var b=this.edit.cmd;b[a].apply(b,ta(arguments,1));return this},focus:function(){this.edit.focus();return this},fullscreen:function(a){this.fullscreenMode=
a===p?!this.fullscreenMode:a;this.remove();return this.create()},createMenu:function(a){var b=this.toolbar.get(a.name),c=b.pos();a.x=c.x;a.y=c.y+b.height();if(a.selectedColor!==p){a.noColor=this.lang("noColor");this.menu=ib(a)}else{a.centerLineMode=false;this.menu=hb(a)}return this.menu},hideMenu:function(){this.beforeHideMenu();this.menu.remove();this.menu=null;return this},createDialog:function(a){var b=this;a.shadowMode=b.shadowMode;a.closeBtn={name:b.lang("close"),click:function(){b.hideDialog();
b.focus()}};a.noBtn={name:b.lang("no"),click:function(){b.hideDialog();b.focus()}};return b.dialog=jb(a)},hideDialog:function(){this.dialog.remove();this.dialog=null;return this}};M&&da<7&&ha(document,"BackgroundImageCache",true);h.create=function(a,b){b||(b={});var c=h(a);if(c){b.srcElement=c[0];if(!b.width)b.width=c.width();if(!b.height)b.height=c.height();return(new nb(b)).create()}};h.plugin=function(a,b){Fa[a]=b};h.lang=mb})(window);
KindEditor.plugin("core",function(J){var p=this;p.clickToolbar("source",function(){p.toolbar.disable();p.edit.design()});p.clickToolbar("fullscreen",function(){p.fullscreen()});p.clickToolbar("formatblock",function(){var K=p.lang("formatblock.formatBlock"),F={h1:28,h2:24,h3:18,H4:14,p:12},t=p.val("formatblock"),L=p.createMenu({name:"formatblock",width:p.langType=="en"?200:150});J.each(K,function(P,G){var O="font-size:"+F[P]+"px;";if(P.charAt(0)==="h")O+="font-weight:bold;";L.addItem({title:'<span style="'+
O+'">'+G+"</span>",height:F[P]+12,checked:t===P||t===G,click:function(){p.select().exec("formatblock","<"+P.toUpperCase()+">").hideMenu()}})})});p.clickToolbar("fontname",function(){var K=p.val("fontname"),F=p.createMenu({name:"fontname",width:150});J.each(p.lang("fontname.fontName"),function(t,L){F.addItem({title:'<span style="font-family: '+t+';">'+L+"</span>",checked:K===t.toLowerCase()||K===L.toLowerCase(),click:function(){p.exec("fontname",t).hideMenu()}})})});p.clickToolbar("fontsize",function(){var K=
p.val("fontsize");menu=p.createMenu({name:"fontsize",width:150});J.each(["9px","10px","12px","14px","16px","18px","24px","32px"],function(F,t){menu.addItem({title:'<span style="font-size:'+t+';">'+t+"</span>",height:J.removeUnit(t)+12,checked:K===t,click:function(){p.exec("fontsize",t).hideMenu()}})})});J.each("forecolor,hilitecolor".split(","),function(K,F){p.clickToolbar(F,function(){p.createMenu({name:F,selectedColor:p.val(F)||"default",click:function(t){p.exec(F,t).hideMenu()}})})});J.each("cut,copy,paste".split(","),
function(K,F){p.clickToolbar(F,function(){p.focus();try{p.exec(F,null)}catch(t){alert(p.lang(F+"Error"))}})});p.clickToolbar("about",function(){var K='<div style="margin:20px;"><div>KindEditor '+J.kindeditor+'</div><div>Copyright &copy; <a href="http://www.kindsoft.net/" target="_blank">kindsoft.net</a> All rights reserved.</div></div>';p.createDialog({name:"about",width:300,title:p.lang("about"),body:K})});J.each("selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript,hr,print,bold,italic,underline,strikethrough,removeformat,unlink".split(","),
function(K,F){p.shortcutKeys[F]&&p.afterCreate(function(){J.ctrl(this.edit.doc,p.shortcutKeys[F],function(){p.clickToolbar(F)})});p.clickToolbar(F,function(){p.focus().exec(F,null)})})});
