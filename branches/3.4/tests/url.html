<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>URL test</title>
  <style type="text/css" rel="stylesheet">
    form {
    margin: 0;
    }
    .editor {
    margin-top: 5px;
    margin-bottom: 5px;
    }
  </style>
  <script type="text/javascript" charset="utf-8" src="./../kindeditor.js"></script>
</head>
<body>
  <input type="text" id="test01" name="test01" value="../images/xxx.gif" style="width:100%" />
  <input type="text" id="test02" name="test02" value="./../../images/xxx.gif" style="width:100%" />
  <input type="text" id="test03" name="test03" value="/ke34/images/xxx.gif" style="width:100%" />
  <input type="text" id="test04" name="test04" value="http://localhost/ke34/images/xxx.gif" style="width:100%" />
  <input type="text" id="test05" name="test05" value="http://www.163.com/images/xxx.gif" style="width:100%" />
  <div>##### result #####</div>
  <div id="debug"></div>
  <script type="text/javascript">
    test("001", KE.format.getUrl(KE.$("test01").value, "absolute"), '/ke34/images/xxx.gif');
    test("002", KE.format.getUrl(KE.$("test01").value, "relative"), './../images/xxx.gif');
    test("003", KE.format.getUrl(KE.$("test01").value, "domain"), 'http://localhost/ke34/images/xxx.gif');
    test("004", KE.format.getUrl(KE.$("test01").value), '../images/xxx.gif');

    test("005", KE.format.getUrl(KE.$("test02").value, "absolute"), '/images/xxx.gif');
    test("006", KE.format.getUrl(KE.$("test02").value, "relative"), './../../images/xxx.gif');
    test("007", KE.format.getUrl(KE.$("test02").value, "domain"), 'http://localhost/images/xxx.gif');
    test("008", KE.format.getUrl(KE.$("test02").value), './../../images/xxx.gif');

    test("009", KE.format.getUrl(KE.$("test03").value, "absolute"), '/ke34/images/xxx.gif');
    test("010", KE.format.getUrl(KE.$("test03").value, "relative"), './../images/xxx.gif');
    test("011", KE.format.getUrl(KE.$("test03").value, "domain"), 'http://localhost/ke34/images/xxx.gif');
    test("012", KE.format.getUrl(KE.$("test03").value), '/ke34/images/xxx.gif');

    test("013", KE.format.getUrl(KE.$("test04").value, "absolute"), '/ke34/images/xxx.gif');
    test("014", KE.format.getUrl(KE.$("test04").value, "relative"), './../images/xxx.gif');
    test("015", KE.format.getUrl(KE.$("test04").value, "domain"), 'http://localhost/ke34/images/xxx.gif');
    test("016", KE.format.getUrl(KE.$("test04").value), 'http://localhost/ke34/images/xxx.gif');

    test("017", KE.format.getUrl(KE.$("test05").value, "absolute"), 'http://www.163.com/images/xxx.gif');
    test("018", KE.format.getUrl(KE.$("test05").value, "relative"), 'http://www.163.com/images/xxx.gif');
    test("019", KE.format.getUrl(KE.$("test05").value, "domain"), 'http://www.163.com/images/xxx.gif');
    test("020", KE.format.getUrl(KE.$("test05").value), 'http://www.163.com/images/xxx.gif');

    function test(id, result, expected) {
        result = result.replace(/\r\n|\n|\r/g, "");
        var log = "";
        if (result === expected) log = id + " [ok]<br />";
        else log = id + " [ng]<br />result: -->" + KE.util.escape(result) + "<--<br />expected: -->" + KE.util.escape(expected) + "<--<br />";
        var debug = KE.$("debug");
        debug.innerHTML += log;
    }
  </script>
</body>
</html>
